(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/chat_old"],{"18ab":function(t,i,n){"use strict";(function(t,o){var e=n("47a9");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=e(n("7eb4")),a=e(n("ee10")),c=getApp(),r={name:"welcome",props:["top","bottom","historyList","qaList","scrollHeight","answering","greetingObj"],data:function(){return{imgUrl:c.globalData.baseImageUrl,tipList:[{text:"我想找个长白班的工作。"},{text:"请问哪些工作是提供吃住的？"},{text:"有没有适合我的工作，轻松一点的。"}],historyId:0,loadAllHistory:!1,scrollView:"fenge_line",Audio:t.createInnerAudioContext(),AudioExam:null,currentPlayType:"",currentPlayIndex:0}},created:function(){var t=this;return(0,a.default)(s.default.mark((function i(){return s.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.Audio.onStop((function(i){t.closeAnmition()})),t.Audio.onEnded((function(i){t.closeAnmition()}));case 2:case"end":return i.stop()}}),i)})))()},watch:{qaList:{handler:function(t,i){console.log("list changed:",t),t.length,this.toScroll()},deep:!0},scrollHeight:function(t){console.log("新窗口高度：",t),this.toScroll()},answering:function(t){t&&this.toScroll()}},methods:{getMoreHistory:function(){this.$emit("moreHis")},sendMsg:function(t,i){var n={msg:t,type:i};this.$emit("sendMsg",n)},handleAudio:function(t,i,n){this.AudioExam=i,this.currentPlayType=t,this.currentPlayIndex=n,this.Audio.paused?this.playAudio(i):this.stopAudio(i)},playAudio:function(t){var i=this;this.Audio.src=t.voice.media.url,this.Audio.id=t.id,this.Audio.play(),"his"==this.currentPlayType?(this.historyList.forEach((function(t,n){"voice"==t.msg_type&&(n==i.currentPlayIndex?i.historyList[i.currentPlayIndex].voice.anmitionPlay=!0:i.historyList[n].voice.anmitionPlay=!1)})),this.qaList.forEach((function(t,n){"voice"==t.msg_type&&(i.qaList[n].voice.anmitionPlay=!1)}))):(this.qaList.forEach((function(t,n){"voice"==t.msg_type&&(n==i.currentPlayIndex?i.qaList[i.currentPlayIndex].voice.anmitionPlay=!0:i.qaList[n].voice.anmitionPlay=!1)})),this.historyList.forEach((function(t,n){"voice"==t.msg_type&&(i.historyList[n].voice.anmitionPlay=!1)})))},stopAudio:function(t){var i=this;"his"==this.currentPlayType?(this.historyList[this.currentPlayIndex].voice.anmitionPlay=!1,this.qaList.forEach((function(t,n){"voice"==t.msg_type&&(i.qaList[n].voice.anmitionPlay=!1)}))):(this.qaList[this.currentPlayIndex].voice.anmitionPlay=!1,this.historyList.forEach((function(t,n){"voice"==t.msg_type&&(i.historyList[n].voice.anmitionPlay=!1)}))),this.Audio.src="",this.Audio.stop()},stopCurAudio:function(){this.Audio.src="",this.Audio.stop()},closeAnmition:function(){var t=this,i=this.Audio.id;"his"==this.currentPlayType?this.historyList.forEach((function(n,o){"voice"==n.msg_type&&n.id==i&&(t.historyList[o].voice.anmitionPlay=!1)})):this.qaList.forEach((function(n,o){"voice"==n.msg_type&&n.id==i&&(t.qaList[o].voice.anmitionPlay=!1)})),this.currentPlayType="",this.currentPlayIndex=0},formatResultStr:function(t){t&&this.speeking(t)},speeking:function(t){console.log(t,"播报内容"),plugin.textToSpeech({lang:"zh_CN",content:t,success:function(t){0==t.retcode?(console.log("result",t.result),o.playBackgroundAudio({dataUrl:t.filename,title:""})):console.warn("翻译失败",t)},fail:function(t){console.log("网络失败",t)}})},showTrans:function(t,i){t.showTranlate||("his"==i?this.historyList.forEach((function(i,n){i.id==t.id&&(i.showTranIcon=!0)})):this.qaList.forEach((function(i,n){i.id==t.id&&(i.showTranIcon=!0)})))},startTrans:function(i,n){var o=this;if(i.showTranIcon=!1,"his"==n)this.historyList.forEach((function(t,n){t.id==i.id&&(t.showTranlate=!0)}));else if(!i.showTranlate){o.qaList.forEach((function(t,n){t.id==i.id&&(t.showTransing=!0)}));var e="/ai/voice/"+i.id+"/recognize/result",s=setInterval((function(){o.$request(e).then((function(n){console.log(n,"查询结果"),0==n.code?n.data.content&&(i.content=n.data.content,o.qaList.forEach((function(t,n){t.id==i.id&&(t.showTranlate=!0,t.showTransing=!1)})),clearInterval(s)):(clearInterval(s),t.hideLoading())}))}),1e3)}},toScroll:function(){var i=this,n=this;n.scrollView="",this.$nextTick((function(){if(i.answering)console.log("正在回答"),n.scrollView="answering";else if(0==n.qaList.length){console.log("qalist为0");var o=n.historyList.length;o>0&&setTimeout((function(){n.scrollView="his"+(n.historyList.length-1),t.hideLoading()}),500)}else{console.log("qalist长度大于0");var e=n.qaList.length-1;setTimeout((function(){n.scrollView="qa"+e,t.hideLoading()}),500)}}))}}};i.default=r}).call(this,n("df3c")["default"],n("3223")["default"])},4434:function(t,i,n){"use strict";var o=n("4a26"),e=n.n(o);e.a},"4a26":function(t,i,n){},"551d":function(t,i,n){"use strict";n.r(i);var o=n("18ab"),e=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){n.d(i,t,(function(){return o[t]}))}(s);i["default"]=e.a},9558:function(t,i,n){"use strict";n.d(i,"b",(function(){return o})),n.d(i,"c",(function(){return e})),n.d(i,"a",(function(){}));var o=function(){var t=this,i=t.$createElement,n=(t._self._c,0==t.historyList.length&&t.qaList.length<2),o=t.historyList.length>0||t.qaList.length>1,e=t.__map(t.historyList,(function(i,n){var o=t.__get_orig(i),e=i.jobs?i.jobs.length:null,s="voice"==i.msg_type?Math.ceil(20*i.voice.second):null,a="voice"==i.msg_type?Math.ceil(i.voice.second):null;return{$orig:o,g2:e,g3:s,g4:a}})),s=t.historyList.length,a=t.qaList.length,c=0!=a?t.__map(t.qaList,(function(i,n){var o=t.__get_orig(i),e=i.jobs?i.jobs.length:null,s="voice"==i.msg_type?Math.ceil(20*i.voice.second):null,a="voice"==i.msg_type?Math.ceil(i.voice.second):null,c=i.may_ask?i.may_ask.length>0&&n==t.qaList.length-1:null;return{$orig:o,g7:e,g8:s,g9:a,g10:c}})):null,r=0==t.historyList.length&&t.qaList.length<2;t.$mp.data=Object.assign({},{$root:{g0:n,g1:o,l0:e,g5:s,g6:a,l1:c,g11:r}})},e=[]},fb66:function(t,i,n){"use strict";n.r(i);var o=n("9558"),e=n("551d");for(var s in e)["default"].indexOf(s)<0&&function(t){n.d(i,t,(function(){return e[t]}))}(s);n("4434");var a=n("828b"),c=Object(a["a"])(e["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);i["default"]=c.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/chat_old-create-component',
    {
        'components/chat_old-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("fb66"))
        })
    },
    [['components/chat_old-create-component']]
]);
