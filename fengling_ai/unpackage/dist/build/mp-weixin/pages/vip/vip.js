(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/vip/vip"],{"6f77":function(e,n,t){"use strict";(function(e,n){var r=t("47a9");t("e58b");r(t("3240"));var i=r(t("e3d0"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(i.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},"70cd":function(e,n,t){},a859:function(e,n,t){"use strict";var r=t("70cd"),i=t.n(r);i.a},d539:function(e,n,t){"use strict";t.r(n);var r=t("e8be"),i=t.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(o);n["default"]=i.a},db7a:function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return r}));var r={uNavbar:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-navbar/u-navbar")]).then(t.bind(null,"d30e"))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,"f11d"))},uGrid:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-grid/u-grid")]).then(t.bind(null,"12c0"))},uGridItem:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-grid-item/u-grid-item")]).then(t.bind(null,"5507"))}},i=function(){var e=this.$createElement;this._self._c},o=[]},e3d0:function(e,n,t){"use strict";t.r(n);var r=t("db7a"),i=t("d539");for(var o in i)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(o);t("a859");var a=t("828b"),u=Object(a["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);n["default"]=u.exports},e8be:function(e,n,t){"use strict";(function(e){var r=t("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(t("7eb4")),o=r(t("ee10")),a=getApp(),u={data:function(){return{showLogin:!1,shareId:"",ifSingle:1154==a.globalData.scene,fromSingle:1155==a.globalData.scene,userInfo:{is_vip:!1},imgUrl:a.globalData.baseImageUrl,marginTop:a.globalData.marginTop,tabMargin:a.globalData.tabMargin,menu:[{icon:a.globalData.baseImageUrl+"/worker/vip_ic_4_white.png",title:"预定工作",url:"/pages/mine/mine"},{icon:a.globalData.baseImageUrl+"/worker/vip_ic_3_white.png",title:"优先匹配",url:"/pages/mine/mine"},{icon:a.globalData.baseImageUrl+"/worker/vip_ic_1_white.png",title:"工作分析",url:"/pages/mine/mine"},{icon:a.globalData.baseImageUrl+"/worker/vip_ic_2_white.png",title:"行业分析",url:"/pages/mine/mine"}]}},components:{login:function(){Promise.all([t.e("common/vendor"),t.e("components/login")]).then(function(){return resolve(t("b921"))}.bind(null,t)).catch(t.oe)}},onLoad:function(n){if(e.setNavigationBarColor({frontColor:"#000000",backgroundColor:"transparent"}),this.shareId=n.share_id?n.share_id:"",!this.ifSingle)return this.fromSingle?(a.globalData.scene=0,void e.redirectTo({url:"/pages/index/index?share_id="+this.shareId})):void(this.isLogin()&&this.getInfo())},methods:{buyVip:function(){var n=this;return(0,o.default)(i.default.mark((function t(){var r;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.isLogin()){t.next=3;break}return n.showLogin=!0,t.abrupt("return");case 3:r=e.getSystemInfoSync(),"ios"==r.osName?n.$request("/ios/status").then((function(e){0==e.code&&(e.data?n.surePay():n.$refs.myModal.showModal({title:"由于相关规范，iOS成为会员功能暂不可用。",showCancel:!1}))})):n.surePay();case 5:case"end":return t.stop()}}),t)})))()},surePay:function(){var n=this;return(0,o.default)(i.default.mark((function t(){var r,o,a;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n,t.next=3,n.getOrderId();case 3:return o=t.sent,t.next=6,n.getOrderParams(o);case 6:a=t.sent,e.requestPayment({appId:a.appId,timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign,success:function(){this.$refs.myModal.showModal({title:"支付成功",showCancel:!1,success:function(e){"confirm"==e&&r.getInfo()}})},fail:function(n){console.log(n,"err"),e.showToast({title:"支付已取消",icon:"error",duration:2e3})}});case 8:case"end":return t.stop()}}),t)})))()},closeLogin:function(){this.showLogin=!1},getOrderId:function(){var e=this;return new Promise((function(n){e.$request("/worker/vip-order",{},"POST").then((function(e){0==e.code&&n(e.data.order_id)}))}))},getOrderParams:function(e){var n=this;return new Promise((function(t){var r="/worker/order/"+e+"/pay";n.$request(r,{},"POST").then((function(e){0==e.code&&t(e.data.wechat_mini_program)}))}))},getInfo:function(){var n=this;this.$request("/worker/profile").then((function(t){0==t.code&&(e.setStorageSync("userInfo",JSON.stringify(t.data)),n.userInfo=t.data)}))}}};n.default=u}).call(this,t("df3c")["default"])}},[["6f77","common/runtime","common/vendor"]]]);