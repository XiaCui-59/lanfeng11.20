<view class="content_body body_bg" style="{{'padding-top:'+(top+'px')+';'+('padding-bottom:'+(bottom+'px')+';')}}"><view class="chat_area"><scroll-view class="chat_wrap" style="{{'height:'+(scrollHeight+'px')+';'}}" scroll-into-view="{{scrollView}}" scroll-y="{{true}}" id="chatwrap" refresher-enabled="{{true}}" refresher-triggered="{{trigger}}" data-event-opts="{{[['refresherrefresh',[['getMoreHistory',['$event']]]]]}}" bindrefresherrefresh="__e"><view class="history list"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="qa_item" id="{{'his'+item.$orig.id}}"><view class="{{['line',item.$orig.origin=='customer'?'right':'left']}}"><view class="inline_box"><view class="{{['cont',item.$orig.msg_type=='text'?'textcont':'']}}"><block wx:if="{{item.$orig.msg_type=='text'&&item.$orig.origin=='customer'}}"><rich-text class="{{[item.$orig.origin=='customer'?'customer_text':'ai_text']}}" nodes="{{item.$orig.content}}"></rich-text></block><block wx:if="{{item.$orig.origin=='ai'}}"><markdown-render class="ai_text" vue-id="{{'2882835a-1-'+index}}" sourceMdContent="{{item.$orig.content}}" showCursor="{{false}}" bind:__l="__l"></markdown-render></block><view class="voice_line flex flex_end"><view data-event-opts="{{[['tap',[['startTrans',['$0','his'],[[['historyList','id',item.$orig.id]]]]]]]}}" hidden="{{!(item.$orig.showTranIcon)}}" class="trans" catchtap="__e"><image src="{{imgUrl+'/worker/ic_trans.png'}}" mode="widthFix"></image></view><block wx:if="{{item.$orig.msg_type=='voice'}}"><view data-event-opts="{{[['tap',[['handleAudio',['his','$0',index],[[['historyList','id',item.$orig.id]]]]]],['longpress',[['showTrans',['$0','his'],[[['historyList','id',item.$orig.id]]]]]]]}}" class="voice_wrap flex flex_end" style="{{'width:'+(item.g0+'px')+';'+('max-width:'+('calc(100% - 136rpx)')+';')+('min-width:'+('60px')+';')}}" catchtap="__e" bindlongpress="__e"><view class="seconds">{{item.g1+"'"}}</view><view class="{{['voice_icon',[(true)?'voice_icon_right':''],[(item.$orig.voice.anmitionPlay)?'voice_icon_right_an':'']]}}"></view></view></block></view><block wx:if="{{item.$orig.showTranlate}}"><rich-text class="trans_result text" nodes="{{item.$orig.content}}"></rich-text></block></view><block wx:if="{{item.$orig.msg_type=='card'&&item.$orig.card&&item.$orig.card.type=='QCODE'}}"><card-kefu vue-id="{{'2882835a-2-'+index}}" bind:__l="__l"></card-kefu></block></view></view></view></block><view hidden="{{!($root.g2>0)}}" class="fenge flex flex_around" id="fenge_line"><view class="fgline"></view><view class="text">以上是历史记录</view><view class="fgline"></view></view></view><block wx:if="{{$root.g3!=0}}"><view class="list" id="listWrap"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="qa_item" id="{{'qa'+index}}"><view class="{{['line',item.$orig.origin=='customer'?'right':'left']}}"><view class="inline_box"><view class="{{['cont',item.$orig.msg_type=='text'?'textcont':'']}}" id="{{'cont'+index}}"><block wx:if="{{item.$orig.msg_type=='text'&&item.$orig.origin=='customer'}}"><rich-text class="{{[item.$orig.origin=='customer'?'customer_text':'ai_text']}}" nodes="{{item.$orig.content}}"></rich-text></block><block wx:if="{{item.$orig.msg_type=='text'&&item.$orig.origin!='customer'}}"><markdown-render class="{{['ai_text',item.g4?'last_ai_text':'']}}" vue-id="{{'2882835a-3-'+index}}" sourceMdContent="{{item.$orig.content}}" showCursor="{{false}}" bind:__l="__l"></markdown-render></block><view class="voice_line flex flex_end"><view data-event-opts="{{[['tap',[['startTrans',['$0','qa'],[[['qaList','id',item.$orig.id]]]]]]]}}" hidden="{{!(item.$orig.showTranIcon)}}" class="trans" catchtap="__e"><image src="{{imgUrl+'/worker/ic_trans.png'}}" mode="widthFix"></image></view><block wx:if="{{item.$orig.msg_type=='voice'}}"><view data-event-opts="{{[['tap',[['handleAudio',['qa','$0',index],[[['qaList','id',item.$orig.id]]]]]],['longpress',[['showTrans',['$0','qa'],[[['qaList','id',item.$orig.id]]]]]]]}}" class="voice_wrap flex flex_end" style="{{'width:'+(item.g5+'px')+';'+('max-width:'+('calc(100% - 136rpx)')+';')+('min-width:'+('60px')+';')}}" catchtap="__e" bindlongpress="__e"><view class="seconds">{{item.g6+"'"}}</view><view class="{{['voice_icon',[(true)?'voice_icon_right':''],[(item.$orig.voice.anmitionPlay)?'voice_icon_right_an':'']]}}"></view></view></block></view><block wx:if="{{item.$orig.showTranlate}}"><rich-text class="trans_result text" nodes="{{item.$orig.content}}"></rich-text></block></view><block wx:if="{{item.$orig.may_ask?item.g7:false}}"><view class="may_ask"><view class="may_ask_list"><block wx:for="{{item.$orig.may_ask}}" wx:for-item="askItem" wx:for-index="askIndex"><view class="ask_item flex flex-start"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" data-event-params="{{({askItem})}}" class="text" catchtap="__e">{{askItem+''}}</view></view></block></view></view></block><block wx:if="{{item.$orig.card&&item.$orig.card.type=='QCODE'}}"><card-kefu vue-id="{{'2882835a-4-'+index}}" bind:__l="__l"></card-kefu></block></view></view></view></block></view></block><view class="list"><view class="qa_item" style="{{'padding-bottom:'+('20rpx')+';'+('display:'+(answering?'block':'none')+';')}}" id="answering"><view class="line left"><view class="inline_box flex" style="align-items:center;"><view class="cont flex" style="width:400rpx;text-align:center;"><text>正在努力思考</text><image style="width:100rpx;margin-left:10rpx;margin-right:0;vertical-align:middle;" src="{{imgUrl+'/worker/answering.gif'}}" mode="widthFix"></image></view></view></view></view></view><view class="list"><view class="qa_item" style="{{'padding-bottom:'+('20rpx')+';'}}" id="continue"></view></view></scroll-view></view></view>