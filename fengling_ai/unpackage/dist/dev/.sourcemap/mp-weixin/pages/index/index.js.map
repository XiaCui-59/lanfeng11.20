{"version":3,"sources":["uni-app:///main.js",null,"webpack:///E:/项目文件/lanfeng11.20/fengling_ai/pages/index/index.vue?94f7","webpack:///E:/项目文件/lanfeng11.20/fengling_ai/pages/index/index.vue?db78","webpack:///E:/项目文件/lanfeng11.20/fengling_ai/pages/index/index.vue?eccb","uni-app:///pages/index/index.vue","webpack:///E:/项目文件/lanfeng11.20/fengling_ai/pages/index/index.vue?fe90","webpack:///E:/项目文件/lanfeng11.20/fengling_ai/pages/index/index.vue?cc17"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","showFlMask","canPlay","greetingObj","logo","title","content","showLoading","showSend","newUser","ifSingle","menuButtonInfo","maskStartPoint","maskEndPoint","showMenu","manager","menuList","text","url","icon","value","imgUrl","list4","name","currentTabIndex","statusBarHeight","botSafe","userInfo","is_vip","showVoice","inputing","voicePermisson","showLogin","shareId","params","openid","startPoint","cancelRecord","touchStartTime","touchEndTime","secondTimer","num","hold","question","qaList","currentQalength","curRespone","origin","msg_type","card","responseStr","responCount","prinTimer","historyList","historyId","loadAllHistory","inputHeight","chatScrollHeight","btnInfo","bodyStartPoint","bodyEndPoint","moveDirection","printTimer1","printTimer2","printTimer3","hasChannel","scrollStr","jobId","sureStatus","greetingReady","action","computed","onLoad","_this","uni","success","showCancel","fail","console","commonMethods","scanId","location","token","onUnload","onShow","onHide","app","mounted","components","login","welcome","chat","channel","flMask","watch","methods","onInput","openCanPlay","toCall","duration","status","job_id","scope","confirmText","complete","listenKeyBoard","height","handleChannelStatus","clickFengling","closeFengling","getPosition","method","resolve","reject","getOpenid","code","share_id","key","printResponse","index","clearInterval","getMayAsk","obj","setGreetStatus","handleConnectErr","printStr","jobs","may_ask","getHistory","newArr","getMoreHistory","setTimeout","handleList","arr","bodyTouchStart","bodyTouchEnd","bodyTouchMove","navigate","sendBtnMsg","strArr","random","handleBtnMsg","inputBindFocus","initRecord","handleRecorder","tempFilePath","filePath","mergedArray","offset","id","voice","media","second","anmitionPlay","showTranIcon","showTranlate","showTransing","stringToUint8Array","send","param","creatConnect","res","connectWebsocket","header","initWebsocket","card_type","job_name","showCard","doSend","e","sendQuestion","handleTouchMove","noInput","resetData","close","startRecord","lang","getSetting","stopRecord","cancelVoice","handleClick","extInfo","corpId","changeTab","openSetting","changeChatMethod","maskStart","maskEnd","handleMaskMove","closeMenu","openMenu","logout","closeLogin","getInfo"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,qUAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAAinB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC8JroB;AACA;AACA;AAGA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AACA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA;QACAH;QACAC;QACAC;QACAC;MACA,EACA;MACAC;MACAC;QACAC;MACA;QACAA;MACA,GACA;QACAA;MACA,EACA;MACAC;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAxC;QACAyC;QACAC;QACAC;MACA;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;IACA;EACA;;EACAC,4BACA,uHACA,oFACA,EACA;EACAC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACAC;cAEA;cACA;cACAC;gBACAC;kBACA;oBACA;oBACAD;sBACArE;sBACAuE;oBACA;kBACA;gBACA;gBACAC;kBACAC;gBACA;cACA;cACA;cACAJ;gBAAA;kBAAA;oBAAA;sBAAA;wBAAA;0BACAI;0BACA;4BACA;4BACAJ;8BACArE;8BACAuE;4BACA;0BACA;4BACAF;8BACAxD;4BACA;4BACAwD;0BACA;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CACA;gBAAA;kBAAA;gBAAA;cAAA;cAAA;cAAA,OACAK;YAAA;cAAA;cACA;gBACA;gBACA;cACA;cACAD;cACA;cACAE;cACA;cACA;cAAA;cAAA,OAEA;YAAA;cAAAC;cACA;cACAC;cACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;cACA;cAAA;cAAA,OACA;YAAA;cAAA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EACAC;IACAL;IACA;IACA;EACA;EACAM;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACAX;cACA;cACA;cACA;cACA;gBACA;gBACA;cACA;cACAC;cACA;gBACA;gBACA;gBACA;cACA;;cACA;gBACA;kBACAD;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EACAY;IACA;IACAC;IACAA;IACAA;IACAA;IACAA;IACA;IACAZ;EACA;EACAa;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACAzB;MACA;QACAK;QACA;MACA;IACA;IACAlD;MACA;MACA;QACA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;UACA;YACAiD;UACA;QAEA;MACA;QACA;MACA;IACA;IACA9B;MACA;QACA;MACA;QACA;MACA;IACA;EACA;EACAoD,yCACA,4GACA,8FACA,mGACA,6FACA,oGACA,mGACA,yEACA;IACAC;MACA;IACA;IACA;IACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACAxB;UACArE;UACAc;UACAgF;QACA;QACA;MACA;MACA;QACAzB;UACArE;UACAc;UACAgF;QACA;QACA;QACA;MACA;MACA;MACA;MACA;QACA;QACAC;QACAC;MACA;MACA;MACA;QACA;QACA3B;UACA4B;UACA3B;YACAF;YACAA;YACAC;cACAxD;YACA;UACA;UACA2D;YACA;YACAJ;YACAA;cACApE;cACAuE;cACA2B;cACA5B;gBACA;kBACAD;oBACAC;sBACA;wBACAF;wBACAA;wBACAC;0BACAxD,8CACAkF;wBACA;sBACA;oBACA;oBACAvB;sBACAJ;oBACA;kBACA;gBACA;cACA;YACA;UACA;UACA+B;YACA9B;UACA;QACA;MAEA;QACA;MACA;IACA;IACA+B;MACA;QACA;QACA;MACA;QACA,sFACAC,SACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;QACApC;UACAxD;UACA6F;UACApC;YACAqC;UACA;UACAnC;YACAoC;UACA;QACA;MACA;IAEA;IACAC;MACA;MACA;QACAxC;UACAC;YACA;cACA;cACA;gBACAwC;gBACAC;cACA;cACAlG;cACAuD;gBACA;kBACAC;oBACA2C;oBACArH;kBACA;kBACAyE;kBACAA,sDACAS;kBACAT;kBACAA;kBACAuC;gBACA;cACA;YACA;UACA;UACAnC;QACA;MACA;IACA;IACAyC;MACA;MACA;MACA;MACA;QACA;QACA;UACA7C;UACA;YACAA;UACA;YACA;YACA;cACAA;YACA;UACA;UAEA8C;QACA;UACA;YACA;cACA9C;YACA;YACA+C;YACA/C;YACAA;YACAA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;;YAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;MACA;IAEA;IACAgD;MAAA;MAEA;QACA;MACA;MACA;MACA;MACA3C;MACA;QACA;UACA;UACAyC;UACAG;UACAA;UACA;QACA;UACAH;UACAG;UACAA;UACA;QACA;MAEA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACAJ;QACA;QACA;UACAlH;UACAuH;UACA7E;UACAD;UACA+E;UACAC;QACA;QACA;MACA;IAEA;IACAC;MACA;MACAlD;MACA;QACA;QACAL;UACA;YACA;cACA;cACAA;YACA;cACAA;YACA;YACA;YACA;YACA;cACAA;YACA;YACAwD;YACAjB;UACA;QACA;MACA;IAEA;IACAkB;MAAA;MACA;MACA;QACA;UACA;YACA;YACA;UACA;YACA;UACA;QACA;QACAxD;QACA;QACA;UACA;YACA;YACAA;YACA;YACA;cACA;cACA;cACA;cACA;cACA;YACA;cACA;YACA;UACA;YACA;UACA;QACA;MACA;QACAA;UACArE;UACAc;UACAgF;QACA;QACAgC;UACA1D;QACA;MAEA;IAEA;IACA;IACA2D;MACA;MACA;QACA;UACA;UACAC;UACAA;UACAA;QACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;MACA;QACA;UACA;QACA;MACA;MACA;IACA;IACAC;MACA;QAEA;QACA;MAEA;MACA;QACA;QACA;MAEA;IACA;IACAC;MACA/D;QACAxD;MACA;IACA;IACAwH;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAAA,IAGA;kBAAA;kBAAA;gBAAA;gBACAhE;kBACArE;kBACAc;kBACAgF;gBACA;gBAAA;cAAA;gBAAA,KAIA;kBAAA;kBAAA;gBAAA;gBACAzB;kBACArE;kBACAc;kBACAgF;gBACA;gBACA;gBAAA;cAAA;gBAGA;gBACA;gBACA;kBACA;kBACAwC;kBACAA;kBACAA;kBACAA;kBACAA;kBACAA;kBACAC;kBACA;gBACA;kBACA;gBACA;gBAEA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;MACA;QACApE;UACA;QACA;UACA;YACAuC;UACA;YACAA;UACA;QACA;MACA;IACA;IACA8B;MACA;QACA;QACA;MACA;MACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;MACA;MACA;MACA;QACA;QACA;QACAvB;QACA;UACA;QACA;UACA9C;YACArE;YACAc;UACA;QACA;MAEA;MACA;QACA;QACA;QACAqG;MACA;IACA;IACA;IACAwB,+CAGA;MAAA,IAFAC;QACA9C;MAEA;MACA;MACA;QACAzB;UACArE;UACAc;UACAgF;QACA;QACA;MACA;MAEA;QACAxG;UACAuJ;UACAvE;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACAwE;YACAC;YAEAD;YACA;YACA;cACAE;cACA/I;cACAyC;cACAC;cACAsG;gBACAC;kBACAlC;kBACAnG;gBACA;gBACAsI;gBACAC;cACA;cACAC;cACAC;cACAC;YACA;YACAnF;YACA;UACA;;UACAI;YACAC;UACA;QACA;MACA;QACA;MACA;;MAGA;IACA;IACA+E;MACA;MACA;MACA;MACA;QACAxB;MACA;MACA;IACA;IACAyB;MACA;MACA;QACApF;UACArE;UACAc;UACAgF;QACA;QACA;MACA;MACA;MACA;QACA;UACA9F;UACAuE;UACA2B;QACA;QACA;MACA;MACA;QACA;MACA;QACA;QACA;UACA7B;QACA;QACA;QACA;QACA;QACA;QACA;QACAY;UACAtF;YACA;YACA;YACA;YACA;UACA;UACA2E;YACAF;YACAA;YACAA;YACAA;YACAA;YACAA;YACAC;YACA;cACA;gBACAD;gBACAsF;gBACAtF;gBACAA;gBACAA;gBACAA;gBACAA;gBACA;cACA;YAEA;UAEA;UACAI;YACAJ;UAEA;QACA;MACA;IAEA;IACAuF;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAvF;gBAAA,KACAa;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAA,kCACA;cAAA;gBAEAR;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA,kCACA;cAAA;gBAEA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAmF;gBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;MACA;QACA5E;UACApE;UACAiJ;UACApD;UACApC;YACAqC;UACA;UACAnC;YACA;cACAxE;cACAuE;YACA;YACA;UACA;QACA;MACA;IACA;IACAwF;MAAA;MACA;MACA9E;QACA;QACA;QACA;QACA;QACA;QACA;QACAR;MACA;MACAQ;QACAA;QACAkC;QACA;QACA;QACA;QACA;UACA;QACA;QACAW;UACA1D;QACA;MACA;MACAa;QACAb;QACAA;QACA;QACAK;QACA;UACA;UACA;YACAA;YACAL;YACA;YACAA;UAEA;YACAA;UACA;UACA;YACAA;UAEA;UACA;YACAA;UACA;YACAA;YACAA;YACAA;YACAA;UACA;QAEA;UACA;YACA;YACA;cACA4F;cACAC;cACAjE;cACAkE;YACA;YACA9F;YACAA;YACAA;YACAA;UACA;YACAA;YACAA;YACAA;UACA;UACA;YACAA;YACAA;YACA;cACAA;YACA;UACA;YACAA;YACA;cACAA;YACA;UACA;QACA;MACA;MACAa;QACA;QACAR;QACAQ;QACA;QACA;QACA;QACAkC;QACAW;UACA1D;QACA;QACA;UACA;QACA;MAEA;IACA;IACA+F;MACA;QACA;QACA;MACA;QACA;QACA;UACA;UACA;UACA;UACAC;QACA;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;QACA;QACA;UACApK;UACAyC;UACAC;QACA;QACA;MACA;IACA;IACA2H;MACA;QACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACA;QACAnG;MACA;IACA;IACAoG;MACA;MACA;QACAvK;QACAyC;QACAC;QACAC;MACA;MACA;MACA;MACA;IACA;IACA6H;MACA;QACA;UACAxF;QACA;MACA;IACA;IACAyF;MACA;QACA;QACA;MACA;MACA;QACArG;UACArE;UACAc;UACAgF;QACA;QACA;MACA;MACA;QACAzB;UACArE;UACAc;UACAgF;QACA;QACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;MACA;QACA;QACA;UACA1B;UACAA;UACAC;YACAC;UACA;UACAF;UACA;UACAA;UACAA;YACA0B;YACA6E;UACA;QACA;UACAtG;YACA4B;YACA3B;cACAF;YACA;YACAI;cACA;cACAJ;YAEA;UACA;QACA;MAEA;IAEA;IACAwG;MACA;MACAvG;QACAC;UACA;YACAF;YACA;UACA;YACAA;YACA;UACA;QACA;QACAI;MACA;IACA;IACAqG;MACA;QACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;QACA/C;UACA1D;QACA;MACA;IACA;IACA;IACA0G;MACA;MACA;MACA;IACA;IACAC;MACA;QACAzL;UACA0L;YACAnK;UACA;UACAoK;UACA3G;QACA;MACA;IACA;IACA4G;MACA;QACA;MACA;QACA;MACA;IAEA;IACAC;MACA;QACA;QACA;MACA;MACA;MACA;MACA;QACA9G;UACAC;YACA;cACAF;YACA;UACA;UACAI;YACAJ;UACA;QACA;MACA;QACAC;UACA4B;UACA3B;YACAF;UACA;UACAI;YACA;YACAJ;UACA;UACA+B;YACA9B;UACA;QACA;MACA;IAGA;IACA+G;MACA;QACA;QACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC,8BAEA;IACAC;MACA;MACA;MACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACA1L;QACAsE;UACA;YACAF;cACA;gBACAA;gBACAC;gBACAA;gBACAA;kBACArE;kBACAc;kBACAgF;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACA6F;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;kBACA;oBACA;oBACAvH;oBACA;oBACA;kBACA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBACAI;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EAAA;AAEA;AAAA,2B;;;;;;;;;;;;;ACj8CA;AAAA;AAAA;AAAA;AAAwqC,CAAgB,8lCAAG,EAAC,C;;;;;;;;;;;ACA5rC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&\"","var components\ntry {\n  components = {\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-navbar/u-navbar\" */ \"@/uni_modules/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uCellGroup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-cell-group/u-cell-group\" */ \"@/uni_modules/uview-ui/components/u-cell-group/u-cell-group.vue\"\n      )\n    },\n    uCell: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-cell/u-cell\" */ \"@/uni_modules/uview-ui/components/u-cell/u-cell.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"single_page\" v-if=\"ifSingle\">\r\n\t\t<image :src=\"imgUrl+'/worker/single_page.png'\" mode=\"widthFix\" style=\"width: 100%;\"></image>\r\n\t</view>\r\n\t<view class=\"home_page body_bg\" v-else @touchstart=\"bodyTouchStart\" @touchmove=\"bodyTouchMove\"\r\n\t\t@touchend=\"bodyTouchEnd\">\r\n\t\t<!-- 自定义导航栏 -->\r\n\t\t<view class=\"navbar\">\r\n\t\t\t<u-navbar :safeAreaInsetTop=\"true\" bgColor=\"rgba(255, 255, 255, 0.25)\">\r\n\t\t\t\t<view class=\"u-nav-slot flex flex-start\" slot=\"left\">\r\n\t\t\t\t\t<view class=\"ic_menu\" @click=\"openMenu\">\r\n\t\t\t\t\t\t<image :src=\"imgUrl+'/worker/new/ic_menu.png'\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"tabs flex flex-start\">\r\n\t\t\t\t\t\t<view class=\"tab\" v-for=\"(item,index) in list4\" :class=\"currentTabIndex==index?'active':''\"\r\n\t\t\t\t\t\t\t@click.stop=\"changeTab(index)\">\r\n\t\t\t\t\t\t\t{{item.name}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</u-navbar>\r\n\t\t</view>\r\n\t\t<view class=\"main_box\">\r\n\t\t\t<!-- 风铃页 -->\r\n\t\t\t<welcome ref=\"welcome\" v-show=\"currentTabIndex == 0\" :top=\"statusBarHeight+44\" :bottom=\"botSafe\"\r\n\t\t\t\t:canPlay=\"canPlay\" @sendMsg=\"sendBtnMsg\" @openCanPlay=\"openCanPlay\" @setGreetStatus=\"setGreetStatus\"\r\n\t\t\t\t@tocall=\"toCall\">\r\n\t\t\t</welcome>\r\n\t\t\t<chat ref=\"chatRef\" v-if=\"currentTabIndex == 1\" :top=\"statusBarHeight+44\" :bottom=\"botSafe\"\r\n\t\t\t\t:historyList=\"historyList\" :qaList=\"qaList\" :scrollHeight=\"chatScrollHeight\" :answering=\"answering\"\r\n\t\t\t\t:greetingObj=\"greetingObj\" :answerContinue=\"answerContinue\" :scrollStr=\"scrollStr\" @sendMsg=\"sendBtnMsg\"\r\n\t\t\t\t@moreHis=\"getMoreHistory\" @tocall=\"toCall\">\r\n\t\t\t</chat>\r\n\t\t\t<!-- 频道页 -->\r\n\t\t\t<channel :top=\"statusBarHeight+44\" :bottom=\"botSafe\" v-show=\"currentTabIndex == 2\"\r\n\t\t\t\t@handleChannelStatus=\"handleChannelStatus\"></channel>\r\n\t\t</view>\r\n\t\t<!-- 侧边栏 -->\r\n\t\t<u-popup :show=\"showMenu\" mode=\"left\" @close=\"closeMenu\" @open=\"openMenu\" bgColor=\"#ffffff\">\r\n\t\t\t<view class=\"inner\" @touchstart=\"maskStart\" @touchend=\"maskEnd\" @touchmove=\"handleMaskMove\">\r\n\t\t\t\t<!-- 自定义导航 -->\r\n\t\t\t\t<u-navbar title=\"个人中心\" @rightClick=\"rightClick\" :autoBack=\"true\"\r\n\t\t\t\t\ttitleStyle=\"color:#010101;font-size: 31rpx;width:83vw;\" :height=\"menuButtonInfo.height+8\"\r\n\t\t\t\t\tstyle=\"width: 83vw;\">\r\n\t\t\t\t\t<view class=\"u-nav-slot\" slot=\"left\" @click=\"closeMenu\">\r\n\t\t\t\t\t\t<u-icon name=\"arrow-left\" size=\"19\"></u-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</u-navbar>\r\n\t\t\t\t<view class=\"user_base_out\">\r\n\t\t\t\t\t<view class=\"user_base\"\r\n\t\t\t\t\t\t:style=\"{marginTop:statusBarHeight+80+'px',backgroundImage:userInfo.is_vip?`url(${imgUrl}/worker/new/vip_bg.png)`:`url(${imgUrl}/worker/new/not_vip_bg.png)`}\"\r\n\t\t\t\t\t\t@click=\"navigate('/pages/vip/vip')\">\r\n\t\t\t\t\t\t<view class=\"user_box\" :style=\"{paddingBottom:userInfo.is_vip?'40rpx':'auto'}\">\r\n\t\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t\t:src=\"userInfo.is_vip?imgUrl+'/worker/new/vip_title.png':imgUrl+'/worker/new/not_vip_title.png'\"\r\n\t\t\t\t\t\t\t\tmode=\"widthFix\"></image>\r\n\t\t\t\t\t\t\t<view class=\"user flex flex-start\">\r\n\t\t\t\t\t\t\t\t<image :src=\"userInfo.avatar.url?userInfo.avatar.url:imgUrl+'/worker/avatar.png'\"\r\n\t\t\t\t\t\t\t\t\tmode=\"widthFix\"></image>\r\n\t\t\t\t\t\t\t\t<view class=\"name flex\" :class=\"userInfo.is_vip?'isvip':'not_vip'\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"mark\" v-if=\"!userInfo.is_vip\">您尚未开通至尊会员</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"tit\">{{userInfo.name}}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"tips flex flex-start\" v-if=\"!userInfo.is_vip\">\r\n\t\t\t\t\t\t\t<image :src=\"imgUrl+'/worker/new/ic_th.png'\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t\t<view class=\"tip\">限时特惠 9.9 送一年会员权益</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"vip_icon\">\r\n\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t:src=\"userInfo.is_vip?imgUrl+'/worker/new/vip_icon_short.png':imgUrl+'/worker/new/not_vip_icon_short.png'\"\r\n\t\t\t\t\t\t\tmode=\"widthFix\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<u-cell-group :border=\"false\">\r\n\t\t\t\t\t<u-cell v-for=\"(item,index) in menuList\" :class=\"item.icon\"\r\n\t\t\t\t\t\t:custom-style=\"{backgroundColor: 'transparent'}\" :key=\"index\" size=\"large\" :title=\"item.text\"\r\n\t\t\t\t\t\t:name=\"item.text\" :border=\"false\" :titleStyle=\"{color:'#4C4C53'}\"\r\n\t\t\t\t\t\t:value=\"index==0?'¥ '+item.value:(index==1 && userInfo.is_vip?'':item.value)\" :clickable=\"false\"\r\n\t\t\t\t\t\t:url=\"item.url\" isLink @click=\"handleClick\"></u-cell>\r\n\t\t\t\t</u-cell-group>\r\n\t\t\t\t<!-- 退出登录 -->\r\n\t\t\t\t<view class=\"logout\" @click=\"logout\">退出登录</view>\r\n\t\t\t</view>\r\n\r\n\t\t</u-popup>\r\n\t\t<view class=\"input_btn_wrap\"\r\n\t\t\t:style=\"{bottom:inputHeight?inputHeight+10+'px':'65rpx',background:inputing?(cancelRecord?'#fe697f':'#216ff9'):'#fff'}\"\r\n\t\t\t:class=\"inputHeight?'upper':''\" v-show=\"currentTabIndex !== 2\">\r\n\t\t\t<!-- 不在语音输入状态 -->\r\n\t\t\t<view v-show=\"!inputing\">\r\n\t\t\t\t<!-- 风铃icon -->\r\n\t\t\t\t<view class=\"fl_icon\" @click.stop=\"clickFengling\">\r\n\t\t\t\t\t<image :src=\"imgUrl+'/worker/new/ic_fengling.png'\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<!-- 语音按钮区 -->\r\n\t\t\t\t\t<view class=\"voice_btn_wrap\" v-show=\"showVoice && voicePermisson\" @touchstart.stop=\"startRecord\"\r\n\t\t\t\t\t\t@touchend.stop=\"stopRecord\" @touchmove.stop=\"handleTouchMove\" @touchcancel.stop=\"cancelVoice\">\r\n\t\t\t\t\t\t{{canSend?\"按住 说话\":\"正在努力思考，请稍后\"}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"voice_btn_wrap\" v-show=\"showVoice && !voicePermisson\" @click.stop=\"openSetting\">按住\r\n\t\t\t\t\t\t说话</view>\r\n\t\t\t\t\t<!-- 键盘输入区 -->\r\n\t\t\t\t\t<view class=\"input_box\" v-show=\"!showVoice\">\r\n\t\t\t\t\t\t<input type=\"text\" confirm-type=\"发送\" :value=\"question\"\r\n\t\t\t\t\t\t\t:placeholder=\"canSend?'更多工作就问我':'正在努力思考，请稍后'\" @focus=\"inputBindFocus\" @confirm=\"doSend\"\r\n\t\t\t\t\t\t\t:disabled=\"!canSend\" @input=\"onInput\" :adjust-position=\"false\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 右侧输入按钮切换区 -->\r\n\t\t\t\t<view class=\"func_icon\" v-show=\"showSend\" @click.stop=\"doSend\">\r\n\t\t\t\t\t<image :src=\"imgUrl+'/worker/ic_send.png'\" style=\"border:1px solid #D8E6FF;border-radius: 50%;\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"func_icon\" @click.stop=\"changeChatMethod\" v-show=\"!showSend\">\r\n\t\t\t\t\t<image :src=\"showVoice?imgUrl+'/worker/ic_keyboard_blue.png':imgUrl+'/worker/ic_voice_blue.png'\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"voice_inputing\" v-show=\"inputing\">\r\n\t\t\t\t<image :src=\"imgUrl+'/worker/new/inputing_wave2.gif'\" mode=\"heightFix\"></image>\r\n\t\t\t</view>\r\n\t\t\t<!-- 快速按钮 -->\r\n\t\t\t<view class=\"btns_wrap flex flex-start\" v-if=\"!inputHeight && currentTabIndex==1\">\r\n\t\t\t\t<view class=\"btn_item flex\" v-if=\"!userInfo.is_vip\" @click=\"navigate('/pages/vip/vip')\">\r\n\t\t\t\t\t<image :src=\"imgUrl+'/worker/new/ic_become_vip.png'\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t<view class=\"\">成为会员</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- <view class=\"btn_item\" @click=\"sendBtnMsg('最新工作')\">最新工作</view> -->\r\n\t\t\t\t<view class=\"btn_item flex \" @click=\"navigate('/pages/invite/invite')\">\r\n\t\t\t\t\t<image :src=\"imgUrl+'/worker/new/ic_gift.png'\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t<view class=\"\">邀请有礼</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 电话按钮 -->\r\n\t\t\t<view v-show=\"currentTabIndex == 1 && !inputHeight\" class=\"phone_icon\"\r\n\t\t\t\t:style=\"{bottom:inputHeight?inputHeight+60+'px':'128rpx'}\" @click=\"toCall\">\r\n\t\t\t\t<image :src=\"imgUrl+'/worker/new/ic_telephone.png'\" mode=\"widthFix\"></image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<login :showLogin=\"showLogin\" @closeLogin=\"closeLogin\" @getInfo=\"getInfo\" :shareId=\"shareId\">\r\n\t\t</login>\r\n\t\t<myModal ref=\"myModal\">\r\n\t\t</myModal>\r\n\t\t<flMask v-if=\"showFlMask\" @closeFengling=\"closeFengling\" @sendMsg=\"sendBtnMsg\"></flMask>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport flMask from \"@/components/flmask.vue\"\r\n\timport login from \"@/components/login.vue\"\r\n\timport welcome from \"@/components/welcome.vue\"\r\n\timport chat from \"@/components/chat.vue\"\r\n\timport channel from \"@/components/channel.vue\"\r\n\timport commonMethods from \"@/common/commMethods.js\"\r\n\timport urlSetting from \"@/url_setting\";\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapMutations\r\n\t} from \"vuex\"\r\n\tconst app = getApp();\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowFlMask: false,\r\n\t\t\t\tcanPlay: true,\r\n\t\t\t\tgreetingObj: {\r\n\t\t\t\t\tlogo: app.globalData.baseImageUrl + \"/worker/new/index_ai_logo.png\",\r\n\t\t\t\t\ttitle: \"您好呀！我是您的职位推荐官风铃。\",\r\n\t\t\t\t\tcontent: \"您可以将您想找的工作、期望的薪资、福利待遇的要求等等发送给我，我会为您推荐合适的职位，快来与我互动吧。\"\r\n\t\t\t\t},\r\n\t\t\t\tshowLoading: true,\r\n\t\t\t\tshowSend: false,\r\n\t\t\t\tnewUser: false,\r\n\t\t\t\tifSingle: app.globalData.scene == 1154 ? true : false,\r\n\t\t\t\tmenuButtonInfo: app.globalData.menuButtonInfo,\r\n\t\t\t\tmaskStartPoint: {},\r\n\t\t\t\tmaskEndPoint: {},\r\n\t\t\t\tshowMenu: false,\r\n\t\t\t\tmanager: app.globalData.manager,\r\n\t\t\t\tmenuList: [{\r\n\t\t\t\t\t\ttext: \"钱包余额\",\r\n\t\t\t\t\t\turl: \"/pages/balance/balance\",\r\n\t\t\t\t\t\ticon: \"rmb-circle-fill\",\r\n\t\t\t\t\t\tvalue: \"0\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: \"会员权益\",\r\n\t\t\t\t\t\turl: \"/pages/vip/vip\",\r\n\t\t\t\t\t\ticon: \"gift-fill\",\r\n\t\t\t\t\t\tvalue: \"成为会员\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: \"邀请有礼\",\r\n\t\t\t\t\t\turl: \"/pages/invite/invite\",\r\n\t\t\t\t\t\ticon: \"share-fill\",\r\n\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: \"关于灵动优聘\",\r\n\t\t\t\t\t\turl: \"/pages/about/about\",\r\n\t\t\t\t\t\ticon: \"info-circle-fill\",\r\n\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttext: \"联系客服\",\r\n\t\t\t\t\t\turl: \"\",\r\n\t\t\t\t\t\ticon: \"info-circle-fill\",\r\n\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\timgUrl: app.globalData.baseImageUrl,\r\n\t\t\t\tlist4: [{\r\n\t\t\t\t\t\tname: '风铃'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '对话',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '频道'\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tcurrentTabIndex: 0,\r\n\t\t\t\tstatusBarHeight: app.globalData.statusBarHeight,\r\n\t\t\t\tbotSafe: 0,\r\n\t\t\t\tuserInfo: {\r\n\t\t\t\t\tis_vip: false\r\n\t\t\t\t},\r\n\t\t\t\tshowVoice: true,\r\n\t\t\t\tinputing: false,\r\n\t\t\t\tvoicePermisson: false,\r\n\t\t\t\tshowLogin: false,\r\n\t\t\t\tshareId: \"\",\r\n\t\t\t\tparams: null,\r\n\t\t\t\topenid: \"\",\r\n\t\t\t\tstartPoint: null,\r\n\t\t\t\tcancelRecord: false,\r\n\t\t\t\ttouchStartTime: \"\",\r\n\t\t\t\ttouchEndTime: \"\",\r\n\t\t\t\tsecondTimer: null,\r\n\t\t\t\tnum: 1,\r\n\t\t\t\thold: \"h1\",\r\n\t\t\t\tquestion: \"\",\r\n\t\t\t\tqaList: [],\r\n\t\t\t\tcurrentQalength: 0,\r\n\t\t\t\tcurRespone: {\r\n\t\t\t\t\tcontent: \"\",\r\n\t\t\t\t\torigin: \"ai\",\r\n\t\t\t\t\tmsg_type: \"text\",\r\n\t\t\t\t\tcard: null\r\n\t\t\t\t},\r\n\t\t\t\tresponseStr: \"\",\r\n\t\t\t\tresponCount: 0, //用于第一次接收到信息时，开启打字效果\r\n\t\t\t\tprinTimer: null,\r\n\t\t\t\thistoryList: [],\r\n\t\t\t\thistoryId: 0,\r\n\t\t\t\tloadAllHistory: false,\r\n\t\t\t\tinputHeight: 0,\r\n\t\t\t\tchatScrollHeight: 0,\r\n\t\t\t\tbtnInfo: null,\r\n\t\t\t\tbodyStartPoint: null,\r\n\t\t\t\tbodyEndPoint: null,\r\n\t\t\t\tmoveDirection: \"\",\r\n\t\t\t\tprintTimer1: null,\r\n\t\t\t\tprintTimer2: null,\r\n\t\t\t\tprintTimer3: null,\r\n\t\t\t\thasChannel: false,\r\n\t\t\t\tscrollStr: \"\",\r\n\t\t\t\tjobId: \"\",\r\n\t\t\t\tsureStatus: false, //记录用户是否报名成功\r\n\t\t\t\tgreetingReady: false,\r\n\t\t\t\taction: \"\" //记录当前状态\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"answering\", \"connected\", \"connecting\", \"canSend\", \"inChannel\", \"answerContinue\", \"channelQaLen\",\r\n\t\t\t\t\"channelId\", \"channelQaList\", \"location\", \"token\", \"inCall\", \"responEnd\", \"aiReady\"\r\n\t\t\t])\r\n\t\t},\r\n\t\tasync onLoad(params) {\r\n\t\t\tvar _this = this;\r\n\t\t\tlet location;\r\n\t\t\tthis.resetCity()\r\n\t\t\t// 网络状态判断\r\n\t\t\tuni.getNetworkType({\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tif (res.networkType.toString() == \"none\") {\r\n\t\t\t\t\t\t// 无网络\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: \"当前无网络，请检查您的网络设置，并重启小程序。\",\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail(err) {\r\n\t\t\t\t\tconsole.log(\"网络判断error\", err)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// 监听网络变化\r\n\t\t\tuni.onNetworkStatusChange(async function(res) {\r\n\t\t\t\tconsole.log(\"网络变化了：\", res.isConnected, res.networkType)\r\n\t\t\t\tif (res.networkType.toString() == \"none\") {\r\n\t\t\t\t\t// 监听到无网络\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: \"当前无网络，请检查您的网络设置，并重启小程序。\",\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\turl: \"/pages/index/index\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.offNetworkStatusChange()\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.btnInfo = await commonMethods.getElementInfo(\".input_btn_wrap\")\r\n\t\t\tif (this.btnInfo) {\r\n\t\t\t\tthis.botSafe = app.globalData.systemHeight - this.btnInfo.top\r\n\t\t\t\tthis.chatScrollHeight = this.btnInfo.top - this.statusBarHeight - 84\r\n\t\t\t}\r\n\t\t\tconsole.log(\"params\", params)\r\n\t\t\t// 扫码进入\r\n\t\t\tlet scanId = params.scene ? decodeURIComponent(params.scene).split(\"=\")[1] : \"\"\r\n\t\t\tthis.shareId = params.share_id ? params.share_id : (scanId ? scanId : \"\")\r\n\t\t\tthis.params = params\r\n\r\n\t\t\tlocation = await this.getPosition()\r\n\t\t\tthis.setLocation(location)\r\n\t\t\tlet token = uni.getStorageSync(\"token\") ? uni.getStorageSync(\"token\") : \"\"\r\n\t\t\tthis.header = {\r\n\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t\"app-id\": urlSetting.urls.appid,\r\n\t\t\t\t\"open-id\": uni.getStorageSync(\"openid\") ? uni.getStorageSync(\"openid\") : \"\",\r\n\t\t\t\t\"ad-project-id\": _this.params.project ? _this.params.project : \"\",\r\n\t\t\t\t\"click-id\": _this.params.gdt_vid ? _this.params.gdt_vid : \"\",\r\n\t\t\t\t\"ad-platform\": _this.params.ad_platform ? _this.params.ad_platform : \"\",\r\n\t\t\t\t\"ad-sub-platform\": _this.params.platform ? _this.params.platform : \"\",\r\n\t\t\t\t\"address\": encodeURIComponent(JSON.stringify(_this.location)),\r\n\t\t\t\t\"Authorization\": \"bearer \" + token,\r\n\t\t\t}\r\n\t\t\tthis.openid = await this.getOpenid()\r\n\t\t\tthis.getSetting()\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tconsole.log(\"执行了onUnload\")\r\n\t\t\tthis.canPlay = false\r\n\t\t\tthis.close()\r\n\t\t},\r\n\t\tasync onShow() {\r\n\t\t\tlet _this = this\r\n\t\t\tthis.closeAnswering()\r\n\t\t\t// 录音初始化\r\n\t\t\tthis.initRecord()\r\n\t\t\tif (!this.answerContinue && !this.answering) {\r\n\t\t\t\tthis.qaList = []\r\n\t\t\t\tthis.resetData()\r\n\t\t\t}\r\n\t\t\tuni.onKeyboardHeightChange(this.listenKeyBoard)\r\n\t\t\tif (this.isLogin()) {\r\n\t\t\t\tthis.getInfo()\r\n\t\t\t\t// this.closeInterviewCard()\r\n\t\t\t\t// this.closeChannelInterviewCard()\r\n\t\t\t}\r\n\t\t\tif (this.currentTabIndex == 1) {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t_this.$refs.chatRef.toScroll()\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tonHide() {\r\n\t\t\t// 移除Audio的各种监听\r\n\t\t\tapp.globalData.Audio.stop()\r\n\t\t\tapp.globalData.Audio.offPlay()\r\n\t\t\tapp.globalData.Audio.offPause()\r\n\t\t\tapp.globalData.Audio.offStop()\r\n\t\t\tapp.globalData.Audio.offEnded()\r\n\t\t\tthis.canPlay = false\r\n\t\t\tuni.offKeyboardHeightChange(this.listenKeyBoard)\r\n\t\t},\r\n\t\tmounted() {},\r\n\t\tcomponents: {\r\n\t\t\tlogin,\r\n\t\t\twelcome,\r\n\t\t\tchat,\r\n\t\t\tchannel,\r\n\t\t\tflMask\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tgreetingReady(newValue) {\r\n\t\t\t\tif (newValue) {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tthis.closeAnswerContinue()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcurrentTabIndex(newValue, oldValue) {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tif (newValue != 0) {\r\n\t\t\t\t\t// 关闭首页语音播放\r\n\t\t\t\t\tthis.canPlay = false\r\n\t\t\t\t}\r\n\t\t\t\tif (newValue == 0) {\r\n\t\t\t\t\tthis.canPlay = true\r\n\t\t\t\t}\r\n\t\t\t\tif (this.isLogin()) {\r\n\t\t\t\t\tif (newValue == 1) {\r\n\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\t_this.$refs.chatRef.toScroll()\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tquestion(newVal) {\r\n\t\t\t\tif (!newVal) {\r\n\t\t\t\t\tthis.showSend = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showSend = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations([\"openAnswering\", \"closeAnswering\", \"setConnected\", \"unConnected\", \"setConnecting\",\r\n\t\t\t\t\"unConnecting\", \"openCansend\", \"closeCansend\", \"notChannel\", \"isChannel\", \"addChannelQaList\",\r\n\t\t\t\t\"openAnswerContinue\", \"closeAnswerContinue\", \"updateChannelQaList\", \"setChannelId\", \"setLocation\",\r\n\t\t\t\t\"setToken\", \"clearChannelQaList\", \"notInCall\", \"setCallContent\", \"setRespEnd\", \"notRespEnd\",\r\n\t\t\t\t\"setInterviewCard\", \"setIncallEnroll\", \"setIncallJobId\", \"resetIncallEnroll\", \"closeInterviewCard\",\r\n\t\t\t\t\"setAiReady\", \"resetAiReady\", \"resetCity\", \"setChannelInterviewCard\", \"closeChannelInterviewCard\",\r\n\t\t\t\t\"setJobName\", \"resetJobName\", \"setJobId\", \"resetJobId\", \"setHangUpFirst\"\r\n\t\t\t]),\r\n\t\t\tonInput(e) {\r\n\t\t\t\tthis.question = e.target.value\r\n\t\t\t},\r\n\t\t\t// onBlur() {\r\n\t\t\t// \tthis.question = \"\"\r\n\t\t\t// },\r\n\t\t\topenCanPlay() {\r\n\t\t\t\tthis.canPlay = true\r\n\t\t\t},\r\n\t\t\ttoCall(obj) {\r\n\t\t\t\tif (!this.aiReady) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"连接中，请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.answering || this.answerContinue) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"回答中，请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.currentTabIndex = 1\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet status = \"\"\r\n\t\t\t\tlet job_id = \"\"\r\n\t\t\t\tif (obj) {\r\n\t\t\t\t\t// 有参数\r\n\t\t\t\t\tstatus = obj.type\r\n\t\t\t\t\tjob_id = obj.job_id\r\n\t\t\t\t}\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tif (this.isLogin()) {\r\n\t\t\t\t\t// 获取语音权限\r\n\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\tscope: 'scope.record',\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t_this.voicePermisson = true\r\n\t\t\t\t\t\t\t_this.canPlay = false\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: \"/pages/phone_call/phone_call?status=\" + status + \"&job_id=\" + job_id\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\t// 弹出麦克风授权\r\n\t\t\t\t\t\t\t_this.voicePermisson = false\r\n\t\t\t\t\t\t\t_this.$refs.myModal.showModal({\r\n\t\t\t\t\t\t\t\ttitle: \"请先开启语音输入权限。\",\r\n\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\tconfirmText: \"好的\",\r\n\t\t\t\t\t\t\t\tsuccess(resp) {\r\n\t\t\t\t\t\t\t\t\tif (resp == \"confirm\") {\r\n\t\t\t\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess(respone) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (respone.authSetting['scope.record']) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_this.voicePermisson = true\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_this.canPlay = false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: \"/pages/phone_call/phone_call?status=\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstatus + \"&job_id=\" + job_id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tfail(openErr) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t_this.voicePermisson = false\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplete() {\r\n\t\t\t\t\t\t\tuni.setStorageSync(\"voiceAuth\", true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlistenKeyBoard(res) {\r\n\t\t\t\tif (res.height == 0) {\r\n\t\t\t\t\tthis.inputHeight = 0\r\n\t\t\t\t\tthis.chatScrollHeight = this.btnInfo.top - this.statusBarHeight - 84\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.chatScrollHeight = app.globalData.systemHeight - this.statusBarHeight - 44 - res\r\n\t\t\t\t\t\t.height -\r\n\t\t\t\t\t\tthis.btnInfo.height - 10\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleChannelStatus(e) {\r\n\t\t\t\tthis.hasChannel = e\r\n\t\t\t},\r\n\t\t\tclickFengling() {\r\n\t\t\t\tthis.showFlMask = true\r\n\t\t\t},\r\n\t\t\tcloseFengling() {\r\n\t\t\t\tthis.showFlMask = false\r\n\t\t\t},\r\n\t\t\tgetPosition() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tlet url = \"https://apis.map.qq.com/ws/location/v1/ip?key=\" + app.globalData.qqMapKey\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tresolve(res.data.result)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\tgetOpenid() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\treturn new Promise(resolve => {\r\n\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.errMsg == 'login:ok') {\r\n\t\t\t\t\t\t\t\tlet url = \"\"\r\n\t\t\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\t\t\tcode: res.code,\r\n\t\t\t\t\t\t\t\t\tshare_id: _this.shareId\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\turl = \"/auth/worker/wechat/mini/openid\"\r\n\t\t\t\t\t\t\t\t_this.$request(url, data, \"POST\", _this.header).then(resp => {\r\n\t\t\t\t\t\t\t\t\tif (resp.code == 0) {\r\n\t\t\t\t\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\t\t\t\t\tkey: \"openid\",\r\n\t\t\t\t\t\t\t\t\t\t\tdata: resp.data.open_id\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t_this.header[\"open-id\"] = resp.data.open_id\r\n\t\t\t\t\t\t\t\t\t\t_this.header[\"Authorization\"] = \"bearer \" + resp.data\r\n\t\t\t\t\t\t\t\t\t\t\t.token\r\n\t\t\t\t\t\t\t\t\t\t_this.setToken(resp.data.token)\r\n\t\t\t\t\t\t\t\t\t\t_this.creatConnect(_this.header)\r\n\t\t\t\t\t\t\t\t\t\tresolve(resp.data.open_id)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {}\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tprintResponse() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tlet index = 0\r\n\t\t\t\tlet noOutCount = 0\r\n\t\t\t\tthis.prinTimer = setInterval(function() {\r\n\t\t\t\t\tlet len = _this.responseStr.length\r\n\t\t\t\t\tif (index < len) {\r\n\t\t\t\t\t\t_this.curRespone.content += _this.responseStr[index]\r\n\t\t\t\t\t\tif (_this.inChannel) {\r\n\t\t\t\t\t\t\t_this.updateChannelQaList(_this.curRespone)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 不在通话页\r\n\t\t\t\t\t\t\tif (!_this.inCall) {\r\n\t\t\t\t\t\t\t\t_this.$set(_this.qaList, _this.currentQalength, _this.curRespone)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tindex++\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (_this.responEnd) {\r\n\t\t\t\t\t\t\tif (_this.curRespone.card) {\r\n\t\t\t\t\t\t\t\t_this.curRespone.card.showCard = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tclearInterval(_this.prinTimer)\r\n\t\t\t\t\t\t\t_this.openCansend()\r\n\t\t\t\t\t\t\t_this.resetData()\r\n\t\t\t\t\t\t\t_this.closeAnswerContinue()\r\n\t\t\t\t\t\t\t// 如果用户是报名成功则推送面试卡片\r\n\t\t\t\t\t\t\t// if (_this.sureStatus) {\r\n\t\t\t\t\t\t\t// \tif (_this.inChannel) {\r\n\t\t\t\t\t\t\t// \t\t_this.setChannelInterviewCard()\r\n\t\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t\t// \t\t_this.setInterviewCard()\r\n\t\t\t\t\t\t\t// \t}\r\n\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// else {\r\n\t\t\t\t\t\t// \tif (noOutCount > 999) {\r\n\t\t\t\t\t\t// \t\t// 如果出现链接异常，未接收到结束标识符[DONE]时，超时30s则自动清除定时器\r\n\t\t\t\t\t\t// \t\tclearInterval(_this.prinTimer)\r\n\t\t\t\t\t\t// \t\t_this.openCansend()\r\n\t\t\t\t\t\t// \t\t_this.resetData()\r\n\t\t\t\t\t\t// \t\t_this.closeAnswerContinue()\r\n\t\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t// \t\tnoOutCount++\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 30)\r\n\r\n\t\t\t},\r\n\t\t\tgetMayAsk() {\r\n\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\t\"job_channel_id\": this.channelId\r\n\t\t\t\t}\r\n\t\t\t\tlet index = 0\r\n\t\t\t\tlet obj = {}\r\n\t\t\t\tconsole.log(\"执行了mayask\")\r\n\t\t\t\tthis.$aiRequest(\"/api/chat/suggested-questions\", data, \"POST\").then(res => {\r\n\t\t\t\t\tif (this.channelId) {\r\n\t\t\t\t\t\t// 频道内\r\n\t\t\t\t\t\tindex = this.channelQaList.length - 1\r\n\t\t\t\t\t\tobj = this.channelQaList[index]\r\n\t\t\t\t\t\tobj.may_ask = res.questions\r\n\t\t\t\t\t\tthis.updateChannelQaList(obj)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = this.qaList.length - 1\r\n\t\t\t\t\t\tobj = this.qaList[index]\r\n\t\t\t\t\t\tobj.may_ask = res.questions\r\n\t\t\t\t\t\tthis.$set(this.qaList, index, obj)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsetGreetStatus() {\r\n\t\t\t\tthis.greetingReady = true\r\n\t\t\t},\r\n\t\t\thandleConnectErr() {\r\n\t\t\t\t// 当链接断开或者出错时提示用户重新发送\r\n\t\t\t\tlet len = this.qaList.length\r\n\t\t\t\tif ((len > 0) && (this.qaList[len - 1].origin == \"customer\")) {\r\n\t\t\t\t\tthis.closeAnswering()\r\n\t\t\t\t\tthis.openCansend()\r\n\t\t\t\t\tthis.closeAnswerContinue()\r\n\t\t\t\t\tthis.resetData()\r\n\t\t\t\t\tclearInterval(this.prinTimer)\r\n\t\t\t\t\t// 上一条是用户发送的数据时\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\tcontent: \"抱歉！刚才打了个盹儿，没理解到您的意思，请重新发送一下您的问题。\",\r\n\t\t\t\t\t\tprintStr: \"\",\r\n\t\t\t\t\t\tmsg_type: \"text\",\r\n\t\t\t\t\t\torigin: \"ai\",\r\n\t\t\t\t\t\tjobs: [],\r\n\t\t\t\t\t\tmay_ask: []\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.qaList.push(data)\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tgetHistory() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tconsole.log(\"获取历史记录\")\r\n\t\t\t\treturn new Promise(resolve => {\r\n\t\t\t\t\tlet url = \"/api/chat/histories?last_message_id=\" + _this.historyId + \"&job_channel_id=\"\r\n\t\t\t\t\t_this.$aiRequest(url, \"\", \"GET\", _this.header).then(res => {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tif (res.data.length == 0) {\r\n\t\t\t\t\t\t\t\t// 新用户\r\n\t\t\t\t\t\t\t\t_this.newUser = true\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_this.newUser = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet newArr = res.data.reverse()\r\n\t\t\t\t\t\t\tlet len = res.data.length\r\n\t\t\t\t\t\t\tif (len > 0) {\r\n\t\t\t\t\t\t\t\t_this.historyId = res.data[0].id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnewArr = _this.handleList(newArr)\r\n\t\t\t\t\t\t\tresolve(newArr)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\tgetMoreHistory() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tif (!this.loadAllHistory) {\r\n\t\t\t\t\tif (!this.historyId) {\r\n\t\t\t\t\t\tif (this.answerContinue || this.answering) {\r\n\t\t\t\t\t\t\tthis.$refs.chatRef.refreshRestore()\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.qaList = []\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.showLoading()\r\n\t\t\t\t\tlet url = \"/api/chat/histories?last_message_id=\" + this.historyId + \"&job_channel_id=\"\r\n\t\t\t\t\tthis.$aiRequest(url).then(res => {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tlet len = res.data.length\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tthis.$refs.chatRef.refreshRestore()\r\n\t\t\t\t\t\t\tif (len > 0) {\r\n\t\t\t\t\t\t\t\tlet resArr = res.data.reverse()\r\n\t\t\t\t\t\t\t\tlet newArr = this.handleList(resArr)\r\n\t\t\t\t\t\t\t\tthis.historyList = newArr.concat(this.historyList)\r\n\t\t\t\t\t\t\t\tthis.scrollStr = \"his\" + res.data[len - 1].id\r\n\t\t\t\t\t\t\t\tthis.historyId = res.data[0].id\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.loadAllHistory = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$refs.chatRef.refreshRestore()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"已加载全部\",\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t_this.$refs.chatRef.refreshRestore()\r\n\t\t\t\t\t}, 500)\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t// 给聊天记录添加字段\r\n\t\t\thandleList(arr) {\r\n\t\t\t\tlet len = arr.length\r\n\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\tif (arr[i].msg_type == \"voice\") {\r\n\t\t\t\t\t\t// 语音记录，添加是否播放状态,默认为false\r\n\t\t\t\t\t\tarr[i].voice.anmitionPlay = false\r\n\t\t\t\t\t\tarr[i].showTranlate = false\r\n\t\t\t\t\t\tarr[i].showTranIcon = false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn arr\r\n\t\t\t},\r\n\t\t\tbodyTouchStart(e) {\r\n\t\t\t\tthis.bodyStartPoint = e.touches[0]\r\n\t\t\t},\r\n\t\t\tbodyTouchEnd(e) {\r\n\t\t\t\tif (this.moveDirection == \"left\") {\r\n\t\t\t\t\tif (this.currentTabIndex < this.list4.length - 1) {\r\n\t\t\t\t\t\tthis.currentTabIndex++\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.moveDirection == \"right\") {\r\n\t\t\t\t\tif (this.currentTabIndex > 0) {\r\n\t\t\t\t\t\tthis.currentTabIndex--\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.moveDirection = \"\"\r\n\t\t\t},\r\n\t\t\tbodyTouchMove(e) {\r\n\t\t\t\tif (this.bodyStartPoint.clientX - e.touches[e.touches.length - 1].clientX > 160) {\r\n\r\n\t\t\t\t\t// 左滑了\r\n\t\t\t\t\tthis.moveDirection = \"left\"\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif (e.touches[e.touches.length - 1].clientX - this.bodyStartPoint.clientX > 160) {\r\n\t\t\t\t\t// 有滑了\r\n\t\t\t\t\tthis.moveDirection = \"right\"\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnavigate(url) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: url + \"?shareid=\" + this.shareId\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync sendBtnMsg(obj) {\r\n\t\t\t\tif (!this.isLogin()) {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.aiReady) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"连接中，请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// 如果正在回答问题\r\n\t\t\t\tif (this.answerContinue) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"回答中，请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.currentTabIndex = 1\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.jobId = obj.job_id\r\n\t\t\t\tthis.action = obj.action\r\n\t\t\t\tif (obj.type == \"job\") {\r\n\t\t\t\t\t// 词语润色\r\n\t\t\t\t\tlet strArr = []\r\n\t\t\t\t\tstrArr.push(\"请介绍一下\" + obj.msg)\r\n\t\t\t\t\tstrArr.push(\"我对\" + obj.msg + \"感兴趣，可以介绍一下吗？\")\r\n\t\t\t\t\tstrArr.push(obj.msg + \"的工作内容是什么呢？福利待遇怎么样？\")\r\n\t\t\t\t\tstrArr.push(obj.msg + \"这个工作看着还不错，请为我介绍下吧\")\r\n\t\t\t\t\tstrArr.push(obj.msg + \"这个工作的详细信息可以说一下吗？\")\r\n\t\t\t\t\tlet random = Math.floor(Math.random() * strArr.length)\r\n\t\t\t\t\tthis.question = strArr[random]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.question = obj.msg\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.currentTabIndex = 1\r\n\t\t\t\tthis.sendQuestion()\r\n\t\t\t},\r\n\t\t\thandleBtnMsg(msg) {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t\t_this.$request(\"/ai/refine/question\", {\r\n\t\t\t\t\t\t\"text\": msg\r\n\t\t\t\t\t}, \"POST\").then(res => {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tresolve(res.data)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tresolve(\"error\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinputBindFocus(e) {\r\n\t\t\t\tif (!this.isLogin()) {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.currentTabIndex = 1\r\n\t\t\t\tif (e.detail.height) {\r\n\t\t\t\t\tthis.inputHeight = e.detail.height //这个高度就是软键盘的高度\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinitRecord() {\r\n\t\t\t\t//录音开始事件\r\n\t\t\t\tthis.manager.onStart(e => {\r\n\t\t\t\t\tthis.inputing = true\r\n\t\t\t\t});\r\n\t\t\t\t//录音结束事件\r\n\t\t\t\tthis.manager.onStop(res => {\r\n\t\t\t\t\tlet _this = this\r\n\t\t\t\t\tthis.inputing = false\r\n\t\t\t\t\tclearInterval(_this.secondTimer)\r\n\t\t\t\t\tif ((this.touchEndTime - this.touchStartTime) > 1000) {\r\n\t\t\t\t\t\tthis.handleRecorder(res);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"长按时间过短\",\r\n\t\t\t\t\t\t\ticon: \"error\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t\tthis.manager.onError(res => {\r\n\t\t\t\t\tlet _this = this\r\n\t\t\t\t\tthis.inputing = false\r\n\t\t\t\t\tclearInterval(_this.secondTimer)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 处理录音数据\r\n\t\t\thandleRecorder({\r\n\t\t\t\ttempFilePath,\r\n\t\t\t\tduration\r\n\t\t\t}) {\r\n\t\t\t\tthis.inputing = false;\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tif (duration < 600) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"说话时间过短\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this.cancelRecord) {\r\n\t\t\t\t\twx.getFileSystemManager().readFile({\r\n\t\t\t\t\t\tfilePath: tempFilePath,\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t// res.data是录音文件的二进制数据\r\n\t\t\t\t\t\t\tconst binaryData = res.data;\r\n\t\t\t\t\t\t\tlet midata = new Uint8Array(binaryData)\r\n\t\t\t\t\t\t\tlet time = new Date().getTime()\r\n\t\t\t\t\t\t\tlet id = uni.getStorageSync(\"openid\") + time\r\n\t\t\t\t\t\t\t// let encoder = new TextEncoder();\r\n\t\t\t\t\t\t\t// let binaryId = encoder.encode(id + \"@@@\")\r\n\t\t\t\t\t\t\tlet binaryId = _this.stringToUint8Array(id + \"@@@@@@\" + _this.jobId + \"@@@@@@\")\r\n\t\t\t\t\t\t\t// 输出拼接后的 Uint8Array\r\n\t\t\t\t\t\t\t// 计算总长度\r\n\t\t\t\t\t\t\tconst totalLength = binaryId.length + midata.length;\r\n\t\t\t\t\t\t\t// 创建一个新的 Uint8Array，长度为所有数组的总和\r\n\t\t\t\t\t\t\tlet mergedArray = new Uint8Array(totalLength);\r\n\t\t\t\t\t\t\t// 使用 set 方法将每个 Uint8Array 的数据填充到新的 Uint8Array 中\r\n\t\t\t\t\t\t\tlet offset = 0;\r\n\t\t\t\t\t\t\tmergedArray.set(binaryId, offset);\r\n\t\t\t\t\t\t\toffset += binaryId.length;\r\n\r\n\t\t\t\t\t\t\tmergedArray.set(midata, offset);\r\n\t\t\t\t\t\t\t// offset += data.length;\r\n\t\t\t\t\t\t\tlet showData = {\r\n\t\t\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\t\t\tcontent: \"\",\r\n\t\t\t\t\t\t\t\torigin: \"customer\",\r\n\t\t\t\t\t\t\t\tmsg_type: \"voice\",\r\n\t\t\t\t\t\t\t\tvoice: {\r\n\t\t\t\t\t\t\t\t\tmedia: {\r\n\t\t\t\t\t\t\t\t\t\tkey: \"\",\r\n\t\t\t\t\t\t\t\t\t\turl: tempFilePath\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsecond: duration / 1000,\r\n\t\t\t\t\t\t\t\t\tanmitionPlay: false\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tshowTranIcon: false,\r\n\t\t\t\t\t\t\t\tshowTranlate: false,\r\n\t\t\t\t\t\t\t\tshowTransing: false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_this.send(mergedArray.buffer, showData, \"voice\")\r\n\t\t\t\t\t\t\t// 接下来你可以对binaryData进行需要的操作\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(error) {\r\n\t\t\t\t\t\t\tconsole.error('读取文件失败：', error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.cancelRecord = false\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// this.canSend && this.sendMsg(params);\r\n\t\t\t},\r\n\t\t\tstringToUint8Array(str) {\r\n\t\t\t\tconst utf8 = unescape(encodeURIComponent(str)); // 将字符串编码为 UTF-8\r\n\t\t\t\tconst len = utf8.length;\r\n\t\t\t\tconst arr = new Uint8Array(len);\r\n\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\tarr[i] = utf8.charCodeAt(i);\r\n\t\t\t\t}\r\n\t\t\t\treturn arr;\r\n\t\t\t},\r\n\t\t\tsend(data, param, type) {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tif (!this.aiReady) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"连接中，请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// 回答完成后才能发下一条信息\r\n\t\t\t\tif (this.answering || this.answerContinue) {\r\n\t\t\t\t\tthis.$refs.myModal.showModal({\r\n\t\t\t\t\t\ttitle: \"目前有正在回复的对话，请稍后重试\",\r\n\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\tconfirmText: \"好的\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.canSend) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 如果无历史记录显示加载中\r\n\t\t\t\t\tif (this.historyList.length == 0) {\r\n\t\t\t\t\t\tuni.showLoading()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.question = \"\"\r\n\t\t\t\t\t// 设置非频道\r\n\t\t\t\t\tthis.notChannel()\r\n\t\t\t\t\t// 设置非通话页\r\n\t\t\t\t\tthis.notInCall()\r\n\t\t\t\t\tapp.globalData.socketTask.send({\r\n\t\t\t\t\t\tdata: type == \"voice\" ? data : JSON.stringify({\r\n\t\t\t\t\t\t\t\"content\": data,\r\n\t\t\t\t\t\t\t\"job_channel_id\": \"\",\r\n\t\t\t\t\t\t\t\"job_id\": _this.jobId,\r\n\t\t\t\t\t\t\t\"action_type\": _this.action\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t_this.jobId = \"\"\r\n\t\t\t\t\t\t\t_this.action = \"\"\r\n\t\t\t\t\t\t\t_this.sureStatus = false\r\n\t\t\t\t\t\t\t_this.closeInterviewCard()\r\n\t\t\t\t\t\t\t_this.closeChannelInterviewCard()\r\n\t\t\t\t\t\t\t_this.$set(_this, \"question\", \"\")\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tif (data != \"ping\") {\r\n\t\t\t\t\t\t\t\tif (!_this.cancelRecord) {\r\n\t\t\t\t\t\t\t\t\t_this.openAnswering()\r\n\t\t\t\t\t\t\t\t\tparam.printStr = \"\"\r\n\t\t\t\t\t\t\t\t\t_this.$set(_this.qaList, _this.qaList.length, param)\r\n\t\t\t\t\t\t\t\t\t_this.currentQalength = _this.qaList.length\r\n\t\t\t\t\t\t\t\t\t_this.num++\r\n\t\t\t\t\t\t\t\t\t_this.hold = \"h\" + _this.num\r\n\t\t\t\t\t\t\t\t\t_this.closeCansend()\r\n\t\t\t\t\t\t\t\t\t// _this.placeHolder = \"正在努力思考，请稍后...\"\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\t_this.jobId = \"\"\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tasync creatConnect(header) {\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\tif (app.globalData.socketTask) {\r\n\t\t\t\t\t// 关闭之前的链接\r\n\t\t\t\t\tawait this.close()\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"connected：\", this.connected)\r\n\t\t\t\tif (this.connected || this.connecting) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t// 两个链接状态都为false才开始创建链接\r\n\t\t\t\tthis.setConnecting()\r\n\t\t\t\tlet res = await this.connectWebsocket(header)\r\n\t\t\t\tif (res.errMsg == \"connectSocket:ok\") {\r\n\t\t\t\t\tthis.initWebsocket()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tconnectWebsocket(header) {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t\tapp.globalData.socketTask = uni.connectSocket({\r\n\t\t\t\t\t\turl: app.globalData.wssUrl,\r\n\t\t\t\t\t\theader: header,\r\n\t\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\tthis.$refs.myModal.showModal({\r\n\t\t\t\t\t\t\t\ttitle: err.errMsg,\r\n\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t// 这里是接口调用失败的回调，不是连接失败的回调，请注意\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitWebsocket() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tapp.globalData.socketTask.onOpen((res) => {\r\n\t\t\t\t\tthis.unConnecting()\r\n\t\t\t\t\tthis.setConnected()\r\n\t\t\t\t\tthis.closeAnswering()\r\n\t\t\t\t\tthis.closeAnswerContinue()\r\n\t\t\t\t\tthis.openCansend()\r\n\t\t\t\t\tthis.setAiReady()\r\n\t\t\t\t\tconsole.log('已成功建立链接onOpen', res);\r\n\t\t\t\t})\r\n\t\t\t\tapp.globalData.socketTask.onError((err) => {\r\n\t\t\t\t\tapp.globalData.socketTask = null\r\n\t\t\t\t\tclearInterval(_this.timer)\r\n\t\t\t\t\tthis.unConnected()\r\n\t\t\t\t\tthis.unConnecting()\r\n\t\t\t\t\tthis.resetAiReady()\r\n\t\t\t\t\tif (this.answering || this.answerContinue) {\r\n\t\t\t\t\t\tthis.handleConnectErr()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t_this.creatConnect(_this.header)\r\n\t\t\t\t\t}, 2000)\r\n\t\t\t\t})\r\n\t\t\t\tapp.globalData.socketTask.onMessage((res) => {\r\n\t\t\t\t\t_this.openAnswerContinue()\r\n\t\t\t\t\t_this.closeAnswering()\r\n\t\t\t\t\tlet respData = JSON.parse(res.data)\r\n\t\t\t\t\tconsole.log(\"websocket返回：\", respData)\r\n\t\t\t\t\tif (_this.inCall) {\r\n\t\t\t\t\t\t// 对话页\r\n\t\t\t\t\t\tif (respData.type == \"audio_call_start_interview\") {\r\n\t\t\t\t\t\t\tconsole.log(\"返回的job_id：\", respData.job_id)\r\n\t\t\t\t\t\t\t_this.setIncallJobId(respData.job_id ? respData.job_id : \"\")\r\n\t\t\t\t\t\t\t// 用户报名了\r\n\t\t\t\t\t\t\t_this.setIncallEnroll()\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.resetIncallEnroll()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (respData.type == \"audio_call_end\") {\r\n\t\t\t\t\t\t\t_this.setHangUpFirst()\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (respData.message != \"[DONE]\") {\r\n\t\t\t\t\t\t\t_this.setCallContent(respData.message)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.setRespEnd()\r\n\t\t\t\t\t\t\t_this.openCansend()\r\n\t\t\t\t\t\t\t_this.resetData()\r\n\t\t\t\t\t\t\t_this.closeAnswerContinue()\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (respData.type == \"audio_call_start_interview\") {\r\n\t\t\t\t\t\t\t// 用户报名了,推送卡片\r\n\t\t\t\t\t\t\tlet card = {\r\n\t\t\t\t\t\t\t\tcard_type: \"audio_call_start_interview\",\r\n\t\t\t\t\t\t\t\tjob_name: respData.job_name,\r\n\t\t\t\t\t\t\t\tjob_id: respData.job_id,\r\n\t\t\t\t\t\t\t\tshowCard: false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_this.curRespone.card = JSON.parse(JSON.stringify(card))\r\n\t\t\t\t\t\t\t_this.sureStatus = true\r\n\t\t\t\t\t\t\t_this.setJobName(respData.job_name)\r\n\t\t\t\t\t\t\t_this.setJobId(respData.job_id)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.sureStatus = false\r\n\t\t\t\t\t\t\t_this.resetJobId()\r\n\t\t\t\t\t\t\t_this.resetJobName()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (respData.message != \"[DONE]\") {\r\n\t\t\t\t\t\t\t_this.responCount++\r\n\t\t\t\t\t\t\t_this.responseStr += respData.message\r\n\t\t\t\t\t\t\tif (_this.responCount == 1) {\r\n\t\t\t\t\t\t\t\t_this.printResponse()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.setRespEnd()\r\n\t\t\t\t\t\t\tif (!_this.sureStatus) {\r\n\t\t\t\t\t\t\t\t_this.getMayAsk()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tapp.globalData.socketTask.onClose((res) => {\r\n\t\t\t\t\t// uni.hideLoading()\r\n\t\t\t\t\tconsole.log('onClose', res)\r\n\t\t\t\t\tapp.globalData.socketTask = null\r\n\t\t\t\t\tthis.unConnected()\r\n\t\t\t\t\tthis.unConnecting()\r\n\t\t\t\t\tthis.resetAiReady()\r\n\t\t\t\t\tclearInterval(_this.timer)\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t_this.creatConnect(_this.header)\r\n\t\t\t\t\t}, 2000)\r\n\t\t\t\t\tif (this.answering || this.answerContinue) {\r\n\t\t\t\t\t\tthis.handleConnectErr()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdoSend(e, text) {\r\n\t\t\t\tif (e.ctrlKey && e.keyCode === 13) {\r\n\t\t\t\t\t//用户点击了ctrl+enter触发\r\n\t\t\t\t\tthis.question += '\\n';\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//用户点击了enter触发    执行一些逻辑方法\r\n\t\t\t\t\tif (e !== undefined) {\r\n\t\t\t\t\t\t//发送消息的方法\r\n\t\t\t\t\t\tthis.sendQuestion();\r\n\t\t\t\t\t\t// 阻止浏览器默认的敲击回车换行的方法\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsendQuestion() {\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\tif (!this.question) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t\t// uni.showToast({\r\n\t\t\t\t\t// \ticon: \"error\",\r\n\t\t\t\t\t// \ttitle: \"无输入\"\r\n\t\t\t\t\t// })\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.inputHeight = 0\r\n\t\t\t\t\tvar showData = {\r\n\t\t\t\t\t\tcontent: this.question,\r\n\t\t\t\t\t\torigin: \"customer\",\r\n\t\t\t\t\t\tmsg_type: \"text\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.send(this.question, showData, \"\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleTouchMove(e) {\r\n\t\t\t\tif (!this.canSend) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// let exp1 = (e.touches[e.touches.length - 1].clientX > this.cancelIconLeft) && (e.touches[e.touches.length -\r\n\t\t\t\t// \t1].clientX < this.cancelIconRight)\r\n\t\t\t\tlet exp = e.touches[e.touches.length - 1].clientY < this.btnInfo.top\r\n\t\t\t\tif (exp) {\r\n\t\t\t\t\tthis.cancelRecord = true\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.cancelRecord = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 间隔一定时间判断用户是否没有输入\r\n\t\t\tnoInput() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tthis.timer = setInterval(function() {\r\n\t\t\t\t\tlet data = \"ping\"\r\n\t\t\t\t\t_this.send(data, \"\", \"\")\r\n\t\t\t\t}, 10000)\r\n\t\t\t},\r\n\t\t\tresetData() {\r\n\t\t\t\tthis.cancelRecord = false\r\n\t\t\t\tthis.curRespone = {\r\n\t\t\t\t\tcontent: \"\",\r\n\t\t\t\t\torigin: \"ai\",\r\n\t\t\t\t\tmsg_type: \"text\",\r\n\t\t\t\t\tcard: null\r\n\t\t\t\t}\r\n\t\t\t\tthis.responCount = 0\r\n\t\t\t\tthis.responseStr = \"\"\r\n\t\t\t\tthis.notRespEnd()\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t\tif (app.globalData.socketTask) {\r\n\t\t\t\t\t\tapp.globalData.socketTask.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tstartRecord(e) {\r\n\t\t\t\tif (!this.isLogin()) {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.aiReady) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"连接中，请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.canSend) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"正在回答请稍后\",\r\n\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tthis.currentTabIndex = 1\r\n\t\t\t\t// 先判断是否是可发送状态\r\n\t\t\t\tif (!this.canSend) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.showVoice) {\r\n\t\t\t\t\t// 判断是否有麦克风授权\r\n\t\t\t\t\tif (_this.voicePermisson) {\r\n\t\t\t\t\t\t_this.touchStartTime = e.timeStamp\r\n\t\t\t\t\t\t_this.$refs.chatRef.stopCurAudio()\r\n\t\t\t\t\t\tuni.vibrateShort({\r\n\t\t\t\t\t\t\tsuccess: function() {}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_this.startPoint = e.touches[0]; //记录长按时开始点信息，后面用于计算上划取消时手指滑动的距离。\r\n\t\t\t\t\t\t// this.showInputing = true\r\n\t\t\t\t\t\t_this.cancelRecord = false\r\n\t\t\t\t\t\t_this.manager.start({\r\n\t\t\t\t\t\t\tduration: 60000,\r\n\t\t\t\t\t\t\tlang: \"zh_CN\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\t\tscope: 'scope.record',\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t_this.voicePermisson = true\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\t\t// 弹出麦克风授权\r\n\t\t\t\t\t\t\t\t_this.voicePermisson = false\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tgetSetting() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tuni.getSetting({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tif (!res.authSetting['scope.record']) {\r\n\t\t\t\t\t\t\t_this.voicePermisson = false\r\n\t\t\t\t\t\t\t// 可以在这里引导用户去设置中开启权限\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.voicePermisson = true\r\n\t\t\t\t\t\t\t// 用户已授权，可以继续进行后续操作\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tstopRecord(e) {\r\n\t\t\t\tif (!this.canSend) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tthis.touchEndTime = e.timeStamp\r\n\t\t\t\tthis.inputing = false\r\n\t\t\t\tif ((this.touchEndTime - this.touchStartTime) > 1000) {\r\n\t\t\t\t\tthis.manager.stop()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t_this.manager.stop()\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//录音被打断\r\n\t\t\tcancelVoice(e) {\r\n\t\t\t\tthis.inputing = false\r\n\t\t\t\t// this.canSend = false;\r\n\t\t\t\tthis.manager.stop();\r\n\t\t\t},\r\n\t\t\thandleClick(e) {\r\n\t\t\t\tif (e.name == \"联系客服\") {\r\n\t\t\t\t\twx.openCustomerServiceChat({\r\n\t\t\t\t\t\textInfo: {\r\n\t\t\t\t\t\t\turl: \"https://work.weixin.qq.com/kfid/kfc01b1c6e379607409\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcorpId: 'wwe3ced2e65390ad79',\r\n\t\t\t\t\t\tsuccess(res) {}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchangeTab(index) {\r\n\t\t\t\tif (this.isLogin()) {\r\n\t\t\t\t\tthis.currentTabIndex = index\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\topenSetting() {\r\n\t\t\t\tif (!this.isLogin()) {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tlet ifAuth = uni.getStorageSync(\"voiceAuth\")\r\n\t\t\t\tif (ifAuth) {\r\n\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tif (res.authSetting['scope.record']) {\r\n\t\t\t\t\t\t\t\t_this.voicePermisson = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(openErr) {\r\n\t\t\t\t\t\t\t_this.voicePermisson = false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\tscope: 'scope.record',\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t_this.voicePermisson = true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\t// 弹出麦克风授权\r\n\t\t\t\t\t\t\t_this.voicePermisson = false\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplete() {\r\n\t\t\t\t\t\t\tuni.setStorageSync(\"voiceAuth\", true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t},\r\n\t\t\tchangeChatMethod() {\r\n\t\t\t\tif (!this.isLogin()) {\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.showVoice = !this.showVoice\r\n\t\t\t},\r\n\t\t\tmaskStart(e) {\r\n\t\t\t\tthis.maskStartPoint = e.touches[0]\r\n\t\t\t},\r\n\t\t\tmaskEnd(e) {\r\n\r\n\t\t\t},\r\n\t\t\thandleMaskMove(e) {\r\n\t\t\t\t// console.log(e)\r\n\t\t\t\t// 判断左滑\r\n\t\t\t\tif (this.maskStartPoint.clientX - e.touches[e.touches.length - 1].clientX > 20) {\r\n\t\t\t\t\tthis.closeMenu()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcloseMenu() {\r\n\t\t\t\tthis.showMenu = false\r\n\t\t\t},\r\n\t\t\topenMenu() {\r\n\t\t\t\t// 判断是否登录\r\n\t\t\t\tif (this.isLogin()) {\r\n\t\t\t\t\t// 已登录\r\n\t\t\t\t\tthis.showMenu = true\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 未登录显示登录弹窗\r\n\t\t\t\t\tthis.showLogin = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlogout() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tthis.$refs.myModal.showModal({\r\n\t\t\t\t\ttitle: \"确认退出登录？\",\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tif (res == \"confirm\") {\r\n\t\t\t\t\t\t\t_this.$request(\"/worker/logout\", {}, \"POST\").then(resp => {\r\n\t\t\t\t\t\t\t\tif (resp.code == 0) {\r\n\t\t\t\t\t\t\t\t\t_this.showMenu = false\r\n\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"token\")\r\n\t\t\t\t\t\t\t\t\tuni.removeStorageSync(\"userInfo\")\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: \"已退出登录\",\r\n\t\t\t\t\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcloseLogin() {\r\n\t\t\t\tthis.showLogin = false\r\n\t\t\t},\r\n\t\t\tasync getInfo() {\r\n\t\t\t\tthis.$request(\"/worker/profile\").then(response => {\r\n\t\t\t\t\tif (response.code == 0) {\r\n\t\t\t\t\t\t// uni.hideLoading()\r\n\t\t\t\t\t\tuni.setStorageSync(\"userInfo\", JSON.stringify(response.data))\r\n\t\t\t\t\t\tthis.userInfo = response.data\r\n\t\t\t\t\t\tthis.menuList[0].value = response.data.balance.total_amount\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.historyId = 0\r\n\t\t\t\tthis.historyList = await this.getHistory()\r\n\t\t\t\tconsole.log(\"historyList：\", this.historyList)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t::v-deep {\r\n\t\t.u-tabs__wrapper__nav__line {\r\n\t\t\tbottom: 0 !important;\r\n\t\t}\r\n\r\n\t\t.u-avatar {\r\n\t\t\tmargin: 0 auto;\r\n\t\t}\r\n\r\n\t\t.inner .u-navbar--fixed {\r\n\t\t\twidth: 83vw;\r\n\t\t}\r\n\r\n\t\t.u-cell__body--large {\r\n\t\t\tbackground: #F7F8FA;\r\n\t\t\t;\r\n\t\t\tborder-radius: 25rpx;\r\n\t\t\t// border: 1rpx solid #28272C;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t}\r\n\r\n\t\t.u-cell__value--large {\r\n\t\t\tfont-weight: 900;\r\n\t\t\tfont-size: 38rpx !important;\r\n\t\t\tcolor: #755022 !important;\r\n\t\t}\r\n\r\n\t\t.u-cell:nth-child(2) .u-cell__value--large {\r\n\t\t\tfont-weight: 400 !important;\r\n\t\t\tfont-size: 31rpx !important;\r\n\t\t\tcolor: #755022 !important;\r\n\t\t\tpadding: 0 20rpx;\r\n\t\t\theight: 58rpx;\r\n\t\t\tline-height: 58rpx;\r\n\t\t\tbackground: rgba(253, 240, 213, 0.6);\r\n\t\t\tborder-radius: 63rpx;\r\n\t\t\tborder: 1rpx solid #755022;\r\n\t\t}\r\n\t}\r\n\r\n\t.tabs {\r\n\t\t// margin-left: 30rpx;\r\n\r\n\t\t.tab {\r\n\t\t\t// margin-right: 40rpx;\r\n\t\t\tpadding: 0 20rpx;\r\n\t\t\theight: 44px;\r\n\t\t\tline-height: 44px;\r\n\t\t\tfont-weight: 500;\r\n\t\t\tfont-size: 35rpx;\r\n\t\t\tcolor: #7aa5c8;\r\n\r\n\t\t\t&.active {\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\tfont-size: 46rpx;\r\n\t\t\t\tcolor: #0F2A4F;\r\n\t\t\t\tposition: relative;\r\n\r\n\t\t\t\t&::after {\r\n\t\t\t\t\tcontent: \"\";\r\n\t\t\t\t\twidth: 29rpx;\r\n\t\t\t\t\theight: 6rpx;\r\n\t\t\t\t\tbackground: #0F2A4F;\r\n\t\t\t\t\tborder-radius: 4rpx;\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\tbottom: -4rpx;\r\n\t\t\t\t\tleft: 50%;\r\n\t\t\t\t\ttransform: translateX(-50%);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.logout {\r\n\t\tposition: fixed;\r\n\t\twidth: calc(83vw - 56rpx);\r\n\t\tbottom: 30rpx;\r\n\t\ttext-align: center;\r\n\t\tleft: 28rpx;\r\n\t\theight: 96rpx;\r\n\t\tline-height: 96rpx;\r\n\t\tborder-radius: 25rpx;\r\n\t\tborder: 1rpx solid #D8E6FF;\r\n\t\tfont-size: 31rpx;\r\n\t\tcolor: #8F8F99;\r\n\t\tbackground: #fff;\r\n\t}\r\n\r\n\t.inner {\r\n\t\tpadding: 0 28rpx;\r\n\t\twidth: 83vw;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground: #fff;\r\n\t\tcolor: #4C4C53;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.user_base_out {\r\n\t\tposition: relative;\r\n\r\n\t\t.vip_icon {\r\n\t\t\tposition: absolute;\r\n\t\t\tbottom: 0rpx;\r\n\t\t\tright: 20rpx;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 170rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.user_base {\r\n\t\tmargin-bottom: 76rpx;\r\n\r\n\t\t// height: 210rpx;\r\n\t\tbackground-size: 100% 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tborder-radius: 25rpx;\r\n\t\toverflow: hidden;\r\n\r\n\r\n\r\n\t\t.tips {\r\n\t\t\tmargin-top: 20rpx;\r\n\t\t\tbackground: rgba(255, 255, 255, 0.15);\r\n\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 200rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.tip {\r\n\t\t\t\twidth: calc(100% - 200rpx);\r\n\t\t\t\tfont-weight: 400;\r\n\t\t\t\tfont-size: 23rpx;\r\n\t\t\t\tcolor: #282319;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&>image {\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\r\n\r\n\r\n\t\t.user_box {\r\n\t\t\tpadding: 30rpx 30rpx 0 30rpx;\r\n\r\n\t\t\t&>image {\r\n\t\t\t\twidth: 176rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.user {\r\n\t\t\t\tmargin-top: 10rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 73rpx;\r\n\t\t\t\t\tflex-shrink: 0;\r\n\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t\tborder-radius: 19rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.name {\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\ttext-align: left;\r\n\r\n\t\t\t\t\t&.not_vip {\r\n\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\talign-items: start;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.isvip {\r\n\t\t\t\t\t\t.tit {\r\n\t\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\t\ttext-shadow: 0px 2px 4px #000000;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.tit {\r\n\t\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.mark {\r\n\t\t\t\t\t\tfont-size: 23rpx;\r\n\t\t\t\t\t\tcolor: #7980AA;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\t}\r\n\r\n\t.ic_menu {\r\n\t\twidth: 58rpx;\r\n\t\theight: 58rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t\tflex-shrink: 0;\r\n\r\n\t\timage {\r\n\t\t\twidth: 58rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.input_btn_wrap {\r\n\t\twidth: calc(100% - 56rpx);\r\n\t\tposition: fixed;\r\n\t\tleft: 28rpx;\r\n\t\tbottom: 24rpx;\r\n\t\theight: 100rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground: #FFFFFF;\r\n\t\tbox-shadow: 0rpx 0rpx 4rpx 0rpx rgba(0, 0, 0, 0.1);\r\n\t\tborder-radius: 63rpx;\r\n\t\tz-index: 10;\r\n\r\n\t\t.phone_icon {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 0;\r\n\t\t\tfont-size: 0;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 77rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.voice_inputing {\r\n\t\t\ttext-align: center;\r\n\r\n\t\t\timage {\r\n\t\t\t\theight: 100rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.btns_wrap {\r\n\t\t\tposition: absolute;\r\n\t\t\tbottom: calc(100% + 10px);\r\n\t\t\tleft: 0;\r\n\r\n\t\t\t.btn_item {\r\n\t\t\t\twidth: 180rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\theight: 30px;\r\n\t\t\t\tline-height: 30px;\r\n\t\t\t\tbackground: #F7F8FA;\r\n\t\t\t\tborder-radius: 63rpx;\r\n\t\t\t\tfont-size: 27rpx;\r\n\t\t\t\tcolor: #7D8488;\r\n\t\t\t\tmargin-right: 15rpx;\r\n\t\t\t\tjustify-content: center;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 28rpx;\r\n\t\t\t\t\tmargin-right: 6rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&.upper {\r\n\t\t\t// position: fixed;\r\n\t\t\t// width: calc(100% - 80rpx);\r\n\t\t\t// left: 40rpx;\r\n\t\t\t// z-index: 105;\r\n\t\t\t// background: #fff;\r\n\t\t\t// border: 1rpx solid #216FF9;\r\n\r\n\t\t\t// .btns_wrap {\r\n\t\t\t// \t.btn_item {\r\n\t\t\t// \t\tbackground: #F7F8FA;\r\n\t\t\t// \t\tcolor: #7D8488;\r\n\t\t\t// \t\t// border: 1rpx solid #216FF9;\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t}\r\n\r\n\t\t.voice_btn_wrap {\r\n\t\t\theight: 100rpx;\r\n\t\t\tline-height: 100rpx;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\r\n\t\t.input_box {\r\n\t\t\tinput {\r\n\t\t\t\theight: 100rpx;\r\n\t\t\t\tline-height: 100rpx;\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tcolor: #0F2A4F;\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tpadding: 0 75rpx 0 100rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t}\r\n\r\n\t\t.fl_icon {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 8rpx;\r\n\t\t\tleft: 11rpx;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 86rpx;\r\n\t\t\t\theight: 86rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.func_icon {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 20rpx;\r\n\t\t\tright: 15rpx;\r\n\t\t\tz-index: 100;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 60rpx;\r\n\t\t\t\theight: 60rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1732865103384\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}