(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpkg/edit_project/edit_project"],{7509:function(e,t,n){},"85be":function(e,t,n){"use strict";n.r(t);var a=n("d77a"),r=n("e6a3");for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("bb16");var i=n("828b"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"6c68adfe",null,!1,a["a"],void 0);t["default"]=s.exports},9056:function(e,t,n){"use strict";(function(e){var a=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("7eb4")),o=a(n("ee10")),i=a(n("7ca3")),s=a(n("1b94")),d=getApp(),c={data:function(){var e;return e={gender:[{value:"male",text:"男"},{value:"female",text:"女"},{value:"both",text:"不限"}],currentGender:0,minAge:"",maxAge:"",imgUrl:d.globalData.baseImageUrl,pageName:"编辑职位",currentMainTab:0,scrollHeight:0,boxTop:0,boxHeight:0,headerHeight:0,showActive:!1,projectName:"",salary:"",welfare:"",address:"",addressObj:{province:"",city:"",district:"",address:"",location:{lat:124,lng:123}},content:"",subTabHeight:d.globalData.subTabHeight,tabMargin:d.globalData.tabMargin},(0,i.default)(e,"headerHeight",d.globalData.topHeight),(0,i.default)(e,"marginTop",d.globalData.marginTop),(0,i.default)(e,"btnBottom",d.globalData.btnBottom),(0,i.default)(e,"wrapHeight",0),(0,i.default)(e,"baseBotHeight",0),(0,i.default)(e,"showModal",!1),(0,i.default)(e,"backId",""),(0,i.default)(e,"typeValue","month"),(0,i.default)(e,"typeRange",[{value:"month",text:"元/月"}]),(0,i.default)(e,"info",{name:"",id:"",status:"",worker_salary:"",worker_welfare:"",work_address:"",content:"",broker_avatar:"",broker_mobile:"",broker_name:""}),(0,i.default)(e,"id",""),e},components:{tabbar:function(){n.e("components/tabbar").then(function(){return resolve(n("14ab"))}.bind(null,n)).catch(n.oe)},customHeader:function(){n.e("components/custom_header").then(function(){return resolve(n("731d"))}.bind(null,n)).catch(n.oe)}},onLoad:function(e){var t=this;this.id=e.id,this.getInfo(),this.boxTop=this.marginTop+this.tabMargin,this.boxHeight=d.globalData.systemHeight-this.marginTop-this.tabMargin-this.btnBottom,this.wrapHeight=this.boxHeight-this.subTabHeight-this.btnBottom,setTimeout((function(){t.getElementInfo()}),500)},methods:{genderChange:function(e){for(var t=0;t<this.gender.length;t++)this.gender[t].value==e.detail.value&&(this.currentGender=t)},typeChange:function(e){},reset:function(e){switch(e){case"name":this.info.name="";break;case"address":this.info.work_address.address="";break;default:break}},toEditMore:function(){var t=this;return(0,o.default)(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.navigateTo({url:"/subpkg/addmore_project_info/addmore_project_info?id="+t.id});case 1:case"end":return n.stop()}}),n)})))()},reverseGeocodingClick:function(e,t){var n=new s.default({key:d.globalData.qqMapKey}),a=this;n.reverseGeocoder({location:{latitude:e,longitude:t},success:function(e){a.info.work_address.address=e.result.formatted_addresses.standard_address,a.addressObj.province=e.result.address_component.province,a.addressObj.city=e.result.address_component.city,a.addressObj.district=e.result.address_component.district,a.addressObj.location=e.result.location,a.addressObj.address=e.result.formatted_addresses.standard_address,console.log(a.addressObj)},fail:function(e){console.log(e)},complete:function(e){console.log(e)}})},openAddress:function(){var t=this;e.chooseLocation({success:function(e){t.reverseGeocodingClick(e.latitude,e.longitude)},fail:function(e){console.error("地图打开失败",e)}})},handleConfirm:function(){e.switchTab({url:"/pages/index/index"})},getInfo:function(){var e=this,t="/broker/mini/project/"+this.id+"/info";this.$request(t).then((function(t){if(0==t.code){e.info=t.data,e.addressObj=t.data.work_address;for(var n=0;n<e.gender.length;n++)e.gender[n].value==t.data.worker_gender&&(e.currentGender=n)}}))},getElementInfo:function(){var t=this,n=(e.getSystemInfoSync(),e.createSelectorQuery().select(".base_top"));n.boundingClientRect((function(e){e&&(console.log(e),t.baseBotHeight=t.wrapHeight-e.height)})).exec()},confirmSet:function(){var t=this;return new Promise((function(n){t.info.work_address=t.addressObj,t.info.worker_salary_min=Number(t.info.worker_salary_min),t.info.worker_salary_max=Number(t.info.worker_salary_max),t.info.worker_age_min=Number(t.info.worker_age_min),t.info.worker_age_max=Number(t.info.worker_age_max),t.info.worker_gender=t.gender[t.currentGender].value,t.info.videos=[],t.info.images=[],t.info.work_address.address&&t.info.worker_salary_min&&t.info.worker_salary_max&&t.info.worker_age_min&&t.info.worker_age_max&&t.info.content?t.$request("/broker/mini/project/"+t.id,t.info,"POST").then((function(t){0==t.code&&e.showToast({title:"更新成功",duration:2e3})})):e.showToast({title:"未填写完整",icon:"error",duration:2e3})}))}}};t.default=c}).call(this,n("df3c")["default"])},bb16:function(e,t,n){"use strict";var a=n("7509"),r=n.n(a);r.a},d2fa:function(e,t,n){"use strict";(function(e,t){var a=n("47a9");n("226a");a(n("3240"));var r=a(n("85be"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},d77a:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={uniDataSelect:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-select/components/uni-data-select/uni-data-select")]).then(n.bind(null,"de3e"))}},r=function(){var e=this.$createElement;this._self._c},o=[]},e6a3:function(e,t,n){"use strict";n.r(t);var a=n("9056"),r=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=r.a}},[["d2fa","common/runtime","common/vendor"]]]);