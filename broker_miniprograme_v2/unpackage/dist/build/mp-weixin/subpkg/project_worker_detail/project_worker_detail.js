(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpkg/project_worker_detail/project_worker_detail"],{1434:function(t,e,i){"use strict";i.r(e);var n=i("8517"),o=i("1cbd");for(var r in o)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(r);i("e54c");var a=i("828b"),s=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"5fec052b",null,!1,n["a"],void 0);e["default"]=s.exports},"1cbd":function(t,e,i){"use strict";i.r(e);var n=i("f09d"),o=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=o.a},2083:function(t,e,i){},"5aff":function(t,e,i){"use strict";(function(t,e){var n=i("47a9");i("226a");n(i("3240"));var o=n(i("1434"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(o.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},8517:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=(t._self._c,t.list.length),n=t.__map(t.list,(function(e,i){var n=t.__get_orig(e),o=t.workerStatus.filter((function(t){return t.value==e.status}));return{$orig:n,g1:o}})),o=t.list.length;t.$mp.data=Object.assign({},{$root:{g0:i,l0:n,g2:o}})},o=[]},e54c:function(t,e,i){"use strict";var n=i("2083"),o=i.n(n);o.a},f09d:function(t,e,i){"use strict";(function(t){var n=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("b115")),r=getApp(),a={data:function(){return{imgUrl:r.globalData.baseImageUrl,pageName:"已报名",marginTop:0,comValue:"",startTime:"",endTime:"",workerStatus:o.default.workerStatus,list:[],scrollHeight:0,headerHeight:0,maskInnerTop:0,id:"",type:"",currentPage:1,pagination:{},refreshStatus:!0,isPulling:!1,status:[{value:"wait_check_in",text:"候选中",icon:"/broker/ic_checkin.png"},{value:"check_in",text:"待面试",icon:"/broker/ic_sign_in.png"},{value:"wait_entry",text:"待入职",icon:"/broker/ic_sign_in.png"},{value:"entry",text:"已入职",icon:"/broker/ic_sign_in.png"},{value:"depart",text:"已离职",icon:"/broker/ic_depart.png"}]}},components:{customHeader:function(){i.e("components/custom_header").then(function(){return resolve(i("731d"))}.bind(null,i)).catch(i.oe)}},onLoad:function(t){this.id=t.id,this.type=t.type,this.pageName=this.status.filter((function(e){return e.value==t.type}))[0].text;var e=this;this.getMarginTop(),setTimeout((function(){e.getElementInfo(),e.getTopHeight()}),500),this.getList()},methods:{refreshData:function(){var t=this;this.isPulling||(this.isPulling=!0,this.refreshStatus=!0,this.currentPage=1,this.list=[],this.getList(),setTimeout((function(){t.refreshStatus=!1,t.isPulling=!1}),1e3))},getMarginTop:function(e){var i=t.getMenuButtonBoundingClientRect();this.marginTop=i.height+i.top,this.maskInnerTop=this.marginTop+20},getTopHeight:function(){var e=t.getSystemInfoSync();this.headerHeight=Math.floor(e.screenHeight*(200/844))},getElementInfo:function(){var e=t.getSystemInfoSync(),i=Math.floor(e.screenHeight*(46/844));console.log(i,"tabbar"),this.scrollHeight=e.screenHeight-this.marginTop-i-5},getList:function(){var t=this,e="/broker/mini/project/signing-requests?page="+this.currentPage+"&project_id="+this.id+"&status="+this.type;this.$request(e).then((function(e){0==e.code&&(t.list=t.list.concat(e.data.list),t.pagination=e.data.pagination)}))},lower:function(){this.list.length<this.pagination.totalCount?(this.currentPage++,this.getList()):this.list.length>=this.pagination.totalCount&&t.showToast({title:"已经到底啦~",icon:"none",duration:2e3})},pass:function(e,i){var n=this,o=i?"通过":"拒绝";t.showModal({title:"提示",content:"当前"+o+"的工人："+e.worker_name,success:function(o){if(o.confirm){var r=i?"已通过":"已拒绝",a=[];a.push(e.id);var s={relation_id:a,project_id:n.id,confirm:i,remark:""};n.$request("/broker/mini/project/enroll-confirm",s,"POST").then((function(e){0==e.code&&(t.showModal({title:r,showCancel:!1}),n.list=[],n.getList())}))}}})},checkIn:function(e,i){var n=this,o=i?"接收":"拒绝";t.showModal({title:"提示",content:"当前操作"+o+"的工人："+e.worker_name,success:function(o){if(o.confirm){var r=i?"已接收":"已拒绝",a=[];a.push(e.id);var s={relation_id:a,project_id:n.id,confirm:i,remark:""};n.$request("/broker/mini/project/check-in",s,"POST").then((function(e){0==e.code&&(t.showModal({title:r,showCancel:!1}),n.list=[],n.getList())}))}}})},toSign:function(e,i){var n=this,o=i?"面试通过":"不通过";t.showModal({title:"提示",content:"当前标记"+o+"的工人："+e.worker_name,success:function(o){if(o.confirm){var r=i?"已通过面试":"已标记不通过",a=[];a.push(e.id);var s={relation_id:a,project_id:n.id,confirm:i,remark:""};n.$request("/broker/mini/project/contract-confirm",s,"POST").then((function(e){0==e.code&&(t.showModal({title:r,showCancel:!1}),n.list=[],n.getList())}))}}})},toEntry:function(e,i){var n=this,o=i?"确认入职":"未入职";t.showModal({title:"提示",content:"当前标记"+o+"的工人："+e.worker_name,success:function(o){if(o.confirm){var r=i?"已确认入职":"已标记未入职",a=[];a.push(e.id);var s={relation_id:a,project_id:n.id,confirm:i,remark:""};n.$request("/broker/mini/project/entry-confirm",s,"POST").then((function(e){0==e.code&&(t.showModal({title:r,showCancel:!1}),n.list=[],n.getList())}))}}})},makePhoneCall:function(e){t.makePhoneCall({phoneNumber:e})},depart:function(e){var i=this,n=[];n.push(e.id);var o={relation_id:n,project_id:this.id,remark:""};t.showModal({title:"离职操作",content:"当前离职正在办理离职的员工为："+e.worker_name+"，是否确认离职？",success:function(e){e.confirm&&i.$request("/broker/mini/project/confirm-depart-user",o,"POST").then((function(e){0==e.code&&(t.showModal({title:"离职成功",showCancel:!1}),i.list=[],i.getList())}))}})}}};e.default=a}).call(this,i("df3c")["default"])}},[["5aff","common/runtime","common/vendor"]]]);