(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpkg/authentication/authentication"],{"1f27":function(e,t,n){"use strict";var a=n("b25b"),s=n.n(a);s.a},"3a0d":function(e,t,n){"use strict";n.r(t);var a=n("47ba"),s=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=s.a},"47ba":function(e,t,n){"use strict";(function(e){var a=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(n("7eb4")),i=a(n("7ca3")),r=a(n("ee10")),o=a(n("3b2d"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var u=getApp(),p={data:function(){return{stepImage1:"/broker/step1_inputing.png",step1Finish:!1,step1Data:{business_address:"",business_license_image:{key:"",url:""},name:"",type:"",legal_person_name:"",unified_social_credit_code:""},stepImage2:"/broker/step2_default.png",step2Finish:!1,step2Data:{human_resources_permit_image:{key:"",url:""},name:""},imgUrl:u.globalData.baseImageUrl,pageName:"公司认证",marginTop:0,scrollHeight:0,boxTop:0,headerHeight:0,maskInnerTop:0,currentTab:0,btnText:"发送验证码",canSend:!0,btnText2:"发送验证码",canSend2:!0,name:"",gender:"",idcardNumber:"",idcardDateline:"",legalMobile:"",legalVeriCode:"",contactName:"",contactGender:"",conidcardNumber:"",conidcardDateline:"",contactMobile:"",email:"",contactVeriCode:"",comName:"",creditcode:"",comType:"",comAddress:"",yyzz:{key:"",url:""},idcardFront:{key:"",url:""},idcardBack:{key:"",url:""},conIdcardFront:{key:"",url:""},conIdcardBack:{key:"",url:""},info:{business_address:"",business_license_image:"",company_name:"",company_type:"",has_old_password:!1,human_resources_permit_image:"",id:"9576161222878582",legal_person_name:"",credit_code:""},showCodeVeriStatus:!1,showCodeVeriStatus2:!1}},components:{customHeader:function(){n.e("components/custom_header").then(function(){return resolve(n("11e5"))}.bind(null,n)).catch(n.oe)}},onLoad:function(){var e=this;this.getMarginTop(),setTimeout((function(){e.getElementInfo(),e.getTopHeight()}),500),this.getInfo()},watch:{step1Data:{handler:function(e,t){console.log(e);var n=!0;for(var a in e)console.log((0,o.default)(e[a])),"object"!=(0,o.default)(e[a])?e[a]||(n=!1):e[a].url||(n=!1);console.log(n),n?(this.stepImage1="/broker/step1_finish.png",this.step1Finish=!0):(this.stepImage1="/broker/step1_inputing.png",this.step1Finish=!1)},immediate:!0,deep:!0},step2Data:{handler:function(e,t){console.log(e);var n=!0;for(var a in e)e[a].url||(n=!1);console.log(n),n?(this.stepImage2="/broker/step2_finish.png",this.step2Finish=!0):(this.stepImage2="/broker/step2_inputing.png",this.step2Finish=!1)},immediate:!0,deep:!0}},methods:{changeTab:function(t){this.step1Finish?(this.currentTab=t,1==t?this.step2Finish?this.stepImage2="/broker/step2_finish.png":this.stepImage2="/broker/step2_inputing.png":this.step2Finish?this.stepImage2="/broker/step2_finish.png":this.stepImage2="/broker/step2_default.png"):e.showToast({title:"请先完成第一步",icon:"error",duration:2e3})},getMarginTop:function(t){var n=e.getMenuButtonBoundingClientRect();this.marginTop=n.height+n.top+10,this.maskInnerTop=this.marginTop+20},getTopHeight:function(){var t=e.getSystemInfoSync();this.headerHeight=Math.floor(t.screenHeight*(200/844))},getElementInfo:function(){var t=this,n=e.getSystemInfoSync(),a=e.createSelectorQuery().select(".top_area");a.boundingClientRect((function(e){e.bottom-e.top,t.boxTop=t.marginTop+e.height,t.scrollHeight=n.screenHeight-t.boxTop-5})).exec()},getInfo:function(){var e=this;this.$request("/broker/info").then((function(t){0==t.code&&(e.step1Data.name=t.data.company.name,e.step1Data.type=t.data.company.type,e.step1Data.business_address=t.data.company.business_address,e.step1Data.unified_social_credit_code=t.data.company.unified_social_credit_code,e.step1Data.business_license_image=t.data.company.business_license_image,e.step1Data.legal_person_name=t.data.company.legal_person_name,e.step2Data.human_resources_permit_image=t.data.company.human_resources_permit_image)}))},chooseImage:function(t){var n=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(a){return(0,r.default)(s.default.mark((function i(){var r,o;return s.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=a.tempFilePaths,e.showLoading({title:"识别中，请稍后"}),s.next=4,n.loadImage(u.globalData.baseUrl,t,r[0]);case 4:if(o=s.sent,!o){s.next=16;break}s.t0=t,s.next="business_license"===s.t0?9:"human_resources_permit"===s.t0?12:15;break;case 9:return n.step1Data.business_license_image=o,n.toOcr("business-license",o.key),s.abrupt("break",16);case 12:return n.step2Data.human_resources_permit_image=o,n.toOcr("human-resources-permit",o.key),s.abrupt("break",16);case 15:return s.abrupt("break",16);case 16:case"end":return s.stop()}}),i)})))()},fail:function(e){console.log(e)}})},toOcr:function(e,t){var n=this,a="/broker/ocr/"+e,s={key:t};this.$request(a,s,"POST").then((function(t){if(0==t.code)switch(e){case"business-license":n.step1Data.name=t.data.company_name,n.step1Data.type=t.data.company_type,n.step1Data.business_address=t.data.business_address,n.step1Data.unified_social_credit_code=t.data.credit_code,n.step1Data.legal_person_name=t.data.legal_person;break;default:break}}))},toPrev:function(){this.currentTab>0&&(this.currentTab--,this.step2Finish?this.stepImage2="/broker/step2_finish.png":this.stepImage2="/broker/step2_default.png")},confirm:function(){if(1==this.currentTab){if(!this.step2Data.human_resources_permit_image.url)return void e.showToast({title:"信息不完整",duration:2e3,icon:"error"});var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.step1Data);t.human_resources_permit_image=this.step2Data.human_resources_permit_image,this.$request("/broker/company/info",t,"POST").then((function(t){0==t.code&&(e.showToast({title:"提交成功",duration:2e3}),setTimeout((function(){e.navigateBack()}),2e3))}))}else{if(!this.step1Finish)return void e.showToast({title:"请先完成第一步",icon:"error",duration:2e3});this.currentTab++}}}};t.default=p}).call(this,n("df3c")["default"])},8604:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){}));var a=function(){var e=this.$createElement;this._self._c},s=[]},"964c":function(e,t,n){"use strict";(function(e,t){var a=n("47a9");n("c9a7");a(n("3240"));var s=a(n("da2a"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(s.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},b25b:function(e,t,n){},da2a:function(e,t,n){"use strict";n.r(t);var a=n("8604"),s=n("3a0d");for(var i in s)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return s[e]}))}(i);n("1f27");var r=n("828b"),o=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"a318d9ea",null,!1,a["a"],void 0);t["default"]=o.exports}},[["964c","common/runtime","common/vendor"]]]);