(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/message/message"],{"0d81":function(t,e,n){"use strict";n.r(e);var a=n("81c8"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},"2fc3":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.list.length),a=t.list.length,o=t.__map(t.list,(function(e,n){var o=t.__get_orig(e),i=0!=a?t.event.filter((function(t){return t.value==e.event})).length:null,r=0!=a&&i>=1?t.event.filter((function(t){return t.value==e.event})):null;return{$orig:o,g2:i,g3:r}})),i=t.list.length;t.$mp.data=Object.assign({},{$root:{g0:n,g1:a,l0:o,g4:i}})},o=[]},"3b40":function(t,e,n){"use strict";(function(t,e){var a=n("47a9");n("226a");a(n("3240"));var o=a(n("5edb"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},4539:function(t,e,n){},"5edb":function(t,e,n){"use strict";n.r(e);var a=n("2fc3"),o=n("0d81");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("adfd");var r=n("828b"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"3dd5c853",null,!1,a["a"],void 0);e["default"]=s.exports},"81c8":function(t,e,n){"use strict";(function(t){var a=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("7eb4")),i=a(n("ee10")),r=getApp(),s={data:function(){return{showAddInfo:!1,showNameInput:!0,showLogin:!1,imgUrl:r.globalData.baseImageUrl,currentTab:{value:"project",text:"职位管理",label:"职位"},pageName:"消息",showModal:!1,marginTop:r.globalData.marginTop,mainTabHeight:r.globalData.mainTabHeight,subTabHeight:r.globalData.subTabHeight,tabMargin:r.globalData.tabMargin,tabs:[{value:"project",text:"职位管理",label:"职位",count:0},{value:"attendance_record",text:"考勤相关",label:"考勤",count:0},{value:"project_bill",text:"费用账单",label:"费用",count:0}],event:[{value:"project_waiting_set_platform_fee",text:"去设置"},{value:"project_waiting_submit_platform_review",text:"点击提审"},{value:"project_platform_review_rejected",text:"去编辑"},{value:"project_has_worker_enroll",text:"去确认"}],list:[],scrollHeight:0,boxTop:0,headerHeight:r.globalData.highTopHeight,tabbarHeight:0,currentPage:1,pagination:{},targetId:"",todo:0,loginStatus:!1,userInfo:{}}},components:{tabbar:function(){n.e("components/tabbar").then(function(){return resolve(n("14ab"))}.bind(null,n)).catch(n.oe)},customHeader:function(){n.e("components/custom_header").then(function(){return resolve(n("731d"))}.bind(null,n)).catch(n.oe)},infoFirst:function(){n.e("components/info_first").then(function(){return resolve(n("c320"))}.bind(null,n)).catch(n.oe)}},onLoad:function(){this.boxTop=this.marginTop+2*this.tabMargin+this.subTabHeight,this.scrollHeight=r.globalData.systemHeight-this.marginTop-2*this.tabMargin-this.subTabHeight-this.tabbarHeight,this.isLogin()&&(this.loginStatus=!0)},watch:{},onShow:function(){var t=this;return(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isLogin()){e.next=12;break}return t.loginStatus=!0,t.refreshTodo(),t.currentPage=1,t.getList(),e.next=7,t.getInfo();case 7:t.userInfo=e.sent,"waiting_submit"!=t.userInfo.broker.review_status&&"rejected"!=t.userInfo.broker.review_status||(t.showAddInfo=!0),t.userInfo.broker.name&&(t.showNameInput=!1),e.next=19;break;case 12:t.showLogin=!0,t.loginStatus=!1,t.list=[],t.todo=0,t.tabs[0].count=0,t.tabs[1].count=0,t.tabs[2].count=0;case 19:case"end":return e.stop()}}),e)})))()},methods:{handleName:function(){this.showNameInput=!1},closeAddInfo:function(){this.showAddInfo=!1},handleInfo:function(t){t.company.name||(this.showAddInfo=!0),t.broker.name&&(this.showNameInput=!1)},closeLogin:function(){this.showLogin=!1},getTabbarHeight:function(t){this.tabbarHeight=t},refreshTodo:function(){var t=this;return(0,i.default)(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getTodoStatic();case 2:n=e.sent,t.todo=n.total,t.tabs[0].count=n.project,t.tabs[1].count=n.attendance_record,t.tabs[2].count=n.project_bill;case 7:case"end":return e.stop()}}),e)})))()},changeTab:function(t){this.currentPage=1,this.currentTab=t,this.refreshTodo(),this.getList()},handleCancel:function(){this.showModal=!1},handleConfirm:function(){var e=this,n="/broker/mini/project/"+this.targetId+"/submit-review";this.$request(n,{},"POST").then((function(n){0==n.code&&(e.showModal=!1,t.showToast({title:"提审成功",duration:3e3}),e.refreshTodo(),e.currentPage=1,e.getList())}))},getMore:function(){var t=this,e="/broker/mini/todos?page="+this.currentPage+"&target="+this.currentTab.value;this.$request(e).then((function(e){0==e.code&&(t.list=t.list.concat(e.data.list),t.pagination=e.data.pagination)}))},getList:function(){var t=this,e="/broker/mini/todos?page=1&target="+this.currentTab.value;this.$request(e).then((function(e){0==e.code&&(t.list=e.data.list,t.pagination=e.data.pagination)}))},toDetail:function(e){"project_waiting_set_platform_fee"==e.event||"project_platform_review_rejected"==e.event||"project_has_worker_enroll"==e.event?t.navigateTo({url:e.extra.url}):"project_waiting_submit_platform_review"==e.event?(this.targetId=e.target_id,this.showModal=!0):t.setClipboardData({data:"https://es.swiftwd.com",success:function(t){}})},lower:function(){this.list.length<this.pagination.totalCount?(this.currentPage++,this.getMore()):this.list.length>=this.pagination.totalCount&&t.showToast({title:"已经到底啦~",icon:"none",duration:2e3})}}};e.default=s}).call(this,n("df3c")["default"])},adfd:function(t,e,n){"use strict";var a=n("4539"),o=n.n(a);o.a}},[["3b40","common/runtime","common/vendor"]]]);